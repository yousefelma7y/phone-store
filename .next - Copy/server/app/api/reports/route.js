/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/reports/route";
exports.ids = ["app/api/reports/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freports%2Froute&page=%2Fapi%2Freports%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freports%2Froute&page=%2Fapi%2Freports%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pc_Downloads_github_phone_store_src_app_api_reports_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/reports/route.js */ \"(rsc)/./src/app/api/reports/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/reports/route\",\n        pathname: \"/api/reports\",\n        filename: \"route\",\n        bundlePath: \"app/api/reports/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pc\\\\Downloads\\\\github\\\\phone-store\\\\src\\\\app\\\\api\\\\reports\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_pc_Downloads_github_phone_store_src_app_api_reports_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyZXBvcnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZyZXBvcnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcmVwb3J0cyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q2dpdGh1YiU1Q3Bob25lLXN0b3JlJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q2dpdGh1YiU1Q3Bob25lLXN0b3JlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUMrQjtBQUM1RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxccGNcXFxcRG93bmxvYWRzXFxcXGdpdGh1YlxcXFxwaG9uZS1zdG9yZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxyZXBvcnRzXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZXBvcnRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmVwb3J0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcmVwb3J0cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHBjXFxcXERvd25sb2Fkc1xcXFxnaXRodWJcXFxccGhvbmUtc3RvcmVcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxccmVwb3J0c1xcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freports%2Froute&page=%2Fapi%2Freports%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/reports/route.js":
/*!**************************************!*\
  !*** ./src/app/api/reports/route.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(rsc)/./src/lib/mongodb.js\");\n/* harmony import */ var _models_Order__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/Order */ \"(rsc)/./src/models/Order.js\");\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/Product */ \"(rsc)/./src/models/Product.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\n\n\nasync function POST(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const { reportType, startDate, endDate, userId } = await request.json();\n        if (!reportType) {\n            return next_server__WEBPACK_IMPORTED_MODULE_3__.NextResponse.json({\n                success: false,\n                message: \"Report type is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Default to last 30 days if no dates provided\n        const start = startDate ? new Date(startDate) : new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n        const end = endDate ? new Date(endDate) : new Date();\n        // Set end date to end of day\n        end.setHours(23, 59, 59, 999);\n        let reportData = {};\n        switch(reportType){\n            case \"sales\":\n                reportData = await generateSalesReport(start, end, userId);\n                break;\n            case \"products\":\n                reportData = await generateProductReport(start, end, userId);\n                break;\n            case \"daily\":\n                reportData = await generateDailyReport(start, end, userId);\n                break;\n            case \"payment\":\n                reportData = await generatePaymentReport(start, end, userId);\n                break;\n            case \"summary\":\n                reportData = await generateSummaryReport(start, end, userId);\n                break;\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_3__.NextResponse.json({\n                    success: false,\n                    message: \"Invalid report type\"\n                }, {\n                    status: 400\n                });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_3__.NextResponse.json({\n            success: true,\n            data: reportData,\n            period: {\n                start,\n                end\n            }\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Report generation error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_3__.NextResponse.json({\n            success: false,\n            message: error.message || \"Failed to generate report\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Sales Report - Overall sales statistics\nasync function generateSalesReport(startDate, endDate, userId) {\n    const matchQuery = {\n        createdAt: {\n            $gte: startDate,\n            $lte: endDate\n        },\n        status: {\n            $ne: 'cancelled'\n        } // Exclude cancelled orders\n    };\n    if (userId) matchQuery.userId = userId;\n    const orders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(matchQuery);\n    const totalSales = orders.reduce((sum, order)=>sum + order.total, 0);\n    const totalOrders = orders.length;\n    const averageOrderValue = totalOrders > 0 ? totalSales / totalOrders : 0;\n    // Calculate totals by payment method\n    const paymentBreakdown = orders.reduce((acc, order)=>{\n        const method = order.paymentMethod || \"cash\";\n        acc[method] = (acc[method] || 0) + order.total;\n        return acc;\n    }, {});\n    // Calculate discount totals\n    const totalDiscount = orders.reduce((sum, order)=>sum + (order.discount?.amount || order.discount || 0), 0);\n    // Daily sales trend\n    const dailySales = orders.reduce((acc, order)=>{\n        const date = new Date(order.createdAt).toISOString().split(\"T\")[0];\n        if (!acc[date]) {\n            acc[date] = {\n                date,\n                sales: 0,\n                orders: 0\n            };\n        }\n        acc[date].sales += order.total;\n        acc[date].orders += 1;\n        return acc;\n    }, {});\n    return {\n        totalSales: totalSales,\n        totalOrders,\n        averageOrderValue: averageOrderValue,\n        totalDiscount: totalDiscount,\n        paymentBreakdown,\n        dailySales: Object.values(dailySales).sort((a, b)=>new Date(a.date) - new Date(b.date))\n    };\n}\n// Product Report - Best selling products\nasync function generateProductReport(startDate, endDate, userId) {\n    const matchQuery = {\n        createdAt: {\n            $gte: startDate,\n            $lte: endDate\n        },\n        status: {\n            $ne: 'cancelled'\n        } // Exclude cancelled orders\n    };\n    if (userId) matchQuery.userId = userId;\n    const orders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(matchQuery).populate('items.product');\n    // Calculate product statistics\n    const productStats = {};\n    orders.forEach((order)=>{\n        order.items.forEach((item)=>{\n            const productId = (item.product?._id || item.product || item.productId).toString();\n            const productName = item.product?.name || item.name || 'Unknown Product';\n            if (!productStats[productId]) {\n                productStats[productId] = {\n                    productId,\n                    name: productName,\n                    quantitySold: 0,\n                    revenue: 0,\n                    timesOrdered: 0\n                };\n            }\n            productStats[productId].quantitySold += item.quantity;\n            productStats[productId].revenue += item.price * item.quantity;\n            productStats[productId].timesOrdered += 1;\n        });\n    });\n    // Convert to array and sort by revenue\n    const topProducts = Object.values(productStats).sort((a, b)=>b.revenue - a.revenue).slice(0, 20).map((product)=>({\n            ...product,\n            revenue: parseFloat(product.revenue)\n        }));\n    // Get low stock products\n    const allProducts = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find(userId ? {\n        userId\n    } : {});\n    const lowStockProducts = allProducts.filter((p)=>p.stock < (p.minStock || 10)).map((p)=>({\n            _id: p._id,\n            name: p.name,\n            stock: p.stock,\n            minStock: p.minStock || 10\n        })).sort((a, b)=>a.stock - b.stock);\n    return {\n        topProducts,\n        lowStockProducts,\n        totalProductsSold: Object.keys(productStats).length\n    };\n}\n// Daily Report - Sales by day\nasync function generateDailyReport(startDate, endDate, userId) {\n    const matchQuery = {\n        createdAt: {\n            $gte: startDate,\n            $lte: endDate\n        },\n        status: {\n            $ne: 'cancelled'\n        } // Exclude cancelled orders\n    };\n    if (userId) matchQuery.userId = userId;\n    const orders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(matchQuery);\n    const dailyData = orders.reduce((acc, order)=>{\n        const date = new Date(order.createdAt).toISOString().split(\"T\")[0];\n        if (!acc[date]) {\n            acc[date] = {\n                date,\n                totalSales: 0,\n                totalOrders: 0,\n                totalItems: 0,\n                cash: 0,\n                card: 0,\n                discount: 0\n            };\n        }\n        acc[date].totalSales += order.total;\n        acc[date].totalOrders += 1;\n        acc[date].totalItems += order.items.reduce((sum, item)=>sum + item.quantity, 0);\n        acc[date].discount += order.discount?.amount || order.discount || 0;\n        if (order.paymentMethod === \"cash\") {\n            acc[date].cash += order.total;\n        } else if (order.paymentMethod === \"card\") {\n            acc[date].card += order.total;\n        }\n        return acc;\n    }, {});\n    return {\n        dailyReport: Object.values(dailyData).sort((a, b)=>new Date(a.date) - new Date(b.date)).map((day)=>({\n                ...day,\n                totalSales: parseFloat(day.totalSales),\n                cash: parseFloat(day.cash),\n                card: parseFloat(day.card),\n                discount: parseFloat(day.discount)\n            }))\n    };\n}\n// Payment Report - Payment method breakdown\nasync function generatePaymentReport(startDate, endDate, userId) {\n    const matchQuery = {\n        createdAt: {\n            $gte: startDate,\n            $lte: endDate\n        },\n        status: {\n            $ne: 'cancelled'\n        } // Exclude cancelled orders\n    };\n    if (userId) matchQuery.userId = userId;\n    const orders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(matchQuery);\n    const paymentStats = orders.reduce((acc, order)=>{\n        const method = order.paymentMethod || \"cash\";\n        if (!acc[method]) {\n            acc[method] = {\n                method,\n                totalAmount: 0,\n                transactionCount: 0,\n                averageTransaction: 0\n            };\n        }\n        acc[method].totalAmount += order.total;\n        acc[method].transactionCount += 1;\n        return acc;\n    }, {});\n    // Calculate averages\n    Object.values(paymentStats).forEach((stat)=>{\n        stat.averageTransaction = stat.totalAmount / stat.transactionCount;\n        stat.totalAmount = parseFloat(stat.totalAmount);\n        stat.averageTransaction = parseFloat(stat.averageTransaction);\n    });\n    return {\n        paymentMethods: Object.values(paymentStats),\n        totalTransactions: orders.length,\n        totalRevenue: parseFloat(orders.reduce((sum, order)=>sum + order.total, 0))\n    };\n}\n// Summary Report - Quick overview\nasync function generateSummaryReport(startDate, endDate, userId) {\n    const matchQuery = {\n        createdAt: {\n            $gte: startDate,\n            $lte: endDate\n        },\n        status: {\n            $ne: 'cancelled'\n        } // Exclude cancelled orders\n    };\n    if (userId) matchQuery.userId = userId;\n    const orders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(matchQuery);\n    const products = await _models_Product__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find(userId ? {\n        userId\n    } : {});\n    const totalRevenue = orders.reduce((sum, order)=>sum + order.total, 0);\n    const totalOrders = orders.length;\n    const totalItemsSold = orders.reduce((sum, order)=>sum + order.items.reduce((itemSum, item)=>itemSum + item.quantity, 0), 0);\n    const totalProducts = products.length;\n    const lowStockCount = products.filter((p)=>p.stock < (p.minStock || 10)).length;\n    // Get cancelled orders count for reference\n    const cancelledMatchQuery = {\n        createdAt: {\n            $gte: startDate,\n            $lte: endDate\n        },\n        status: 'cancelled'\n    };\n    if (userId) cancelledMatchQuery.userId = userId;\n    const cancelledOrders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].countDocuments(cancelledMatchQuery);\n    // Calculate growth (compare with previous period)\n    const periodLength = endDate - startDate;\n    const previousStart = new Date(startDate.getTime() - periodLength);\n    const previousEnd = startDate;\n    const previousMatchQuery = {\n        createdAt: {\n            $gte: previousStart,\n            $lte: previousEnd\n        },\n        status: {\n            $ne: 'cancelled'\n        } // Also exclude cancelled from previous period\n    };\n    if (userId) previousMatchQuery.userId = userId;\n    const previousOrders = await _models_Order__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(previousMatchQuery);\n    const previousRevenue = previousOrders.reduce((sum, order)=>sum + order.total, 0);\n    const revenueGrowth = previousRevenue > 0 ? (totalRevenue - previousRevenue) / previousRevenue * 100 : totalRevenue > 0 ? \"100.00\" : \"0.00\";\n    const orderGrowth = previousOrders.length > 0 ? (totalOrders - previousOrders.length) / previousOrders.length * 100 : totalOrders > 0 ? \"100.00\" : \"0.00\";\n    return {\n        totalRevenue: totalRevenue,\n        totalOrders,\n        totalItemsSold,\n        totalProducts,\n        lowStockCount,\n        cancelledOrders,\n        averageOrderValue: totalRevenue / totalOrders || 0,\n        revenueGrowth: `${revenueGrowth}%`,\n        orderGrowth: `${orderGrowth}%`,\n        previousPeriodRevenue: previousRevenue,\n        previousPeriodOrders: previousOrders.length\n    };\n}\nasync function GET(request) {\n    return next_server__WEBPACK_IMPORTED_MODULE_3__.NextResponse.json({\n        message: \"Use POST method with reportType parameter\",\n        availableReports: [\n            \"sales\",\n            \"products\",\n            \"daily\",\n            \"payment\",\n            \"summary\"\n        ]\n    }, {\n        status: 200\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9yZXBvcnRzL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE2QztBQUNIO0FBQ0k7QUFDSDtBQUVwQyxlQUFlSSxLQUFLQyxPQUFPO0lBQ2hDLElBQUk7UUFDRixNQUFNTCx3REFBU0E7UUFDZixNQUFNLEVBQUVNLFVBQVUsRUFBRUMsU0FBUyxFQUFFQyxPQUFPLEVBQUVDLE1BQU0sRUFBRSxHQUFHLE1BQU1KLFFBQVFLLElBQUk7UUFFckUsSUFBSSxDQUFDSixZQUFZO1lBQ2YsT0FBT0gscURBQVlBLENBQUNPLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLFNBQVM7WUFBMEIsR0FDckQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLCtDQUErQztRQUMvQyxNQUFNQyxRQUFRUCxZQUNWLElBQUlRLEtBQUtSLGFBQ1QsSUFBSVEsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7UUFDOUMsTUFBTUMsTUFBTVQsVUFBVSxJQUFJTyxLQUFLUCxXQUFXLElBQUlPO1FBRTlDLDZCQUE2QjtRQUM3QkUsSUFBSUMsUUFBUSxDQUFDLElBQUksSUFBSSxJQUFJO1FBRXpCLElBQUlDLGFBQWEsQ0FBQztRQUVsQixPQUFRYjtZQUNOLEtBQUs7Z0JBQ0hhLGFBQWEsTUFBTUMsb0JBQW9CTixPQUFPRyxLQUFLUjtnQkFDbkQ7WUFDRixLQUFLO2dCQUNIVSxhQUFhLE1BQU1FLHNCQUFzQlAsT0FBT0csS0FBS1I7Z0JBQ3JEO1lBQ0YsS0FBSztnQkFDSFUsYUFBYSxNQUFNRyxvQkFBb0JSLE9BQU9HLEtBQUtSO2dCQUNuRDtZQUNGLEtBQUs7Z0JBQ0hVLGFBQWEsTUFBTUksc0JBQXNCVCxPQUFPRyxLQUFLUjtnQkFDckQ7WUFDRixLQUFLO2dCQUNIVSxhQUFhLE1BQU1LLHNCQUFzQlYsT0FBT0csS0FBS1I7Z0JBQ3JEO1lBQ0Y7Z0JBQ0UsT0FBT04scURBQVlBLENBQUNPLElBQUksQ0FDdEI7b0JBQUVDLFNBQVM7b0JBQU9DLFNBQVM7Z0JBQXNCLEdBQ2pEO29CQUFFQyxRQUFRO2dCQUFJO1FBRXBCO1FBRUEsT0FBT1YscURBQVlBLENBQUNPLElBQUksQ0FDdEI7WUFDRUMsU0FBUztZQUNUYyxNQUFNTjtZQUNOTyxRQUFRO2dCQUFFWjtnQkFBT0c7WUFBSTtRQUN2QixHQUNBO1lBQUVKLFFBQVE7UUFBSTtJQUVsQixFQUFFLE9BQU9jLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT3hCLHFEQUFZQSxDQUFDTyxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT0MsU0FBU2UsTUFBTWYsT0FBTyxJQUFJO1FBQTRCLEdBQ3hFO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUEsMENBQTBDO0FBQzFDLGVBQWVPLG9CQUFvQmIsU0FBUyxFQUFFQyxPQUFPLEVBQUVDLE1BQU07SUFDM0QsTUFBTW9CLGFBQWE7UUFDakJDLFdBQVc7WUFBRUMsTUFBTXhCO1lBQVd5QixNQUFNeEI7UUFBUTtRQUM1Q0ssUUFBUTtZQUFFb0IsS0FBSztRQUFZLEVBQUUsMkJBQTJCO0lBQzFEO0lBQ0EsSUFBSXhCLFFBQVFvQixXQUFXcEIsTUFBTSxHQUFHQTtJQUVoQyxNQUFNeUIsU0FBUyxNQUFNakMscURBQUtBLENBQUNrQyxJQUFJLENBQUNOO0lBRWhDLE1BQU1PLGFBQWFGLE9BQU9HLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxRQUFVRCxNQUFNQyxNQUFNQyxLQUFLLEVBQUU7SUFDcEUsTUFBTUMsY0FBY1AsT0FBT1EsTUFBTTtJQUNqQyxNQUFNQyxvQkFBb0JGLGNBQWMsSUFBSUwsYUFBYUssY0FBYztJQUV2RSxxQ0FBcUM7SUFDckMsTUFBTUcsbUJBQW1CVixPQUFPRyxNQUFNLENBQUMsQ0FBQ1EsS0FBS047UUFDM0MsTUFBTU8sU0FBU1AsTUFBTVEsYUFBYSxJQUFJO1FBQ3RDRixHQUFHLENBQUNDLE9BQU8sR0FBRyxDQUFDRCxHQUFHLENBQUNDLE9BQU8sSUFBSSxLQUFLUCxNQUFNQyxLQUFLO1FBQzlDLE9BQU9LO0lBQ1QsR0FBRyxDQUFDO0lBRUosNEJBQTRCO0lBQzVCLE1BQU1HLGdCQUFnQmQsT0FBT0csTUFBTSxDQUNqQyxDQUFDQyxLQUFLQyxRQUFVRCxNQUFPQyxDQUFBQSxNQUFNVSxRQUFRLEVBQUVDLFVBQVVYLE1BQU1VLFFBQVEsSUFBSSxJQUNuRTtJQUdGLG9CQUFvQjtJQUNwQixNQUFNRSxhQUFhakIsT0FBT0csTUFBTSxDQUFDLENBQUNRLEtBQUtOO1FBQ3JDLE1BQU1hLE9BQU8sSUFBSXJDLEtBQUt3QixNQUFNVCxTQUFTLEVBQUV1QixXQUFXLEdBQUdDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNsRSxJQUFJLENBQUNULEdBQUcsQ0FBQ08sS0FBSyxFQUFFO1lBQ2RQLEdBQUcsQ0FBQ08sS0FBSyxHQUFHO2dCQUFFQTtnQkFBTUcsT0FBTztnQkFBR3JCLFFBQVE7WUFBRTtRQUMxQztRQUNBVyxHQUFHLENBQUNPLEtBQUssQ0FBQ0csS0FBSyxJQUFJaEIsTUFBTUMsS0FBSztRQUM5QkssR0FBRyxDQUFDTyxLQUFLLENBQUNsQixNQUFNLElBQUk7UUFDcEIsT0FBT1c7SUFDVCxHQUFHLENBQUM7SUFFSixPQUFPO1FBQ0xULFlBQVlBO1FBQ1pLO1FBQ0FFLG1CQUFtQkE7UUFDbkJLLGVBQWVBO1FBQ2ZKO1FBQ0FPLFlBQVlLLE9BQU9DLE1BQU0sQ0FBQ04sWUFBWU8sSUFBSSxDQUN4QyxDQUFDQyxHQUFHQyxJQUFNLElBQUk3QyxLQUFLNEMsRUFBRVAsSUFBSSxJQUFJLElBQUlyQyxLQUFLNkMsRUFBRVIsSUFBSTtJQUVoRDtBQUNGO0FBRUEseUNBQXlDO0FBQ3pDLGVBQWUvQixzQkFBc0JkLFNBQVMsRUFBRUMsT0FBTyxFQUFFQyxNQUFNO0lBQzdELE1BQU1vQixhQUFhO1FBQ2pCQyxXQUFXO1lBQUVDLE1BQU14QjtZQUFXeUIsTUFBTXhCO1FBQVE7UUFDNUNLLFFBQVE7WUFBRW9CLEtBQUs7UUFBWSxFQUFFLDJCQUEyQjtJQUMxRDtJQUNBLElBQUl4QixRQUFRb0IsV0FBV3BCLE1BQU0sR0FBR0E7SUFFaEMsTUFBTXlCLFNBQVMsTUFBTWpDLHFEQUFLQSxDQUFDa0MsSUFBSSxDQUFDTixZQUFZZ0MsUUFBUSxDQUFDO0lBRXJELCtCQUErQjtJQUMvQixNQUFNQyxlQUFlLENBQUM7SUFFdEI1QixPQUFPNkIsT0FBTyxDQUFDLENBQUN4QjtRQUNkQSxNQUFNeUIsS0FBSyxDQUFDRCxPQUFPLENBQUMsQ0FBQ0U7WUFDbkIsTUFBTUMsWUFBWSxDQUFDRCxLQUFLRSxPQUFPLEVBQUVDLE9BQU9ILEtBQUtFLE9BQU8sSUFBSUYsS0FBS0MsU0FBUyxFQUFFRyxRQUFRO1lBQ2hGLE1BQU1DLGNBQWNMLEtBQUtFLE9BQU8sRUFBRUksUUFBUU4sS0FBS00sSUFBSSxJQUFJO1lBRXZELElBQUksQ0FBQ1QsWUFBWSxDQUFDSSxVQUFVLEVBQUU7Z0JBQzVCSixZQUFZLENBQUNJLFVBQVUsR0FBRztvQkFDeEJBO29CQUNBSyxNQUFNRDtvQkFDTkUsY0FBYztvQkFDZEMsU0FBUztvQkFDVEMsY0FBYztnQkFDaEI7WUFDRjtZQUNBWixZQUFZLENBQUNJLFVBQVUsQ0FBQ00sWUFBWSxJQUFJUCxLQUFLVSxRQUFRO1lBQ3JEYixZQUFZLENBQUNJLFVBQVUsQ0FBQ08sT0FBTyxJQUFJUixLQUFLVyxLQUFLLEdBQUdYLEtBQUtVLFFBQVE7WUFDN0RiLFlBQVksQ0FBQ0ksVUFBVSxDQUFDUSxZQUFZLElBQUk7UUFDMUM7SUFDRjtJQUVBLHVDQUF1QztJQUN2QyxNQUFNRyxjQUFjckIsT0FBT0MsTUFBTSxDQUFDSyxjQUMvQkosSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUVhLE9BQU8sR0FBR2QsRUFBRWMsT0FBTyxFQUNwQ0ssS0FBSyxDQUFDLEdBQUcsSUFDVEMsR0FBRyxDQUFDWixDQUFBQSxVQUFZO1lBQ2YsR0FBR0EsT0FBTztZQUNWTSxTQUFTTyxXQUFXYixRQUFRTSxPQUFPO1FBQ3JDO0lBRUYseUJBQXlCO0lBQ3pCLE1BQU1RLGNBQWMsTUFBTS9FLHVEQUFPQSxDQUFDaUMsSUFBSSxDQUFDMUIsU0FBUztRQUFFQTtJQUFPLElBQUksQ0FBQztJQUM5RCxNQUFNeUUsbUJBQW1CRCxZQUN0QkUsTUFBTSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEtBQUssR0FBSUQsQ0FBQUEsRUFBRUUsUUFBUSxJQUFJLEVBQUMsR0FDeENQLEdBQUcsQ0FBQyxDQUFDSyxJQUFPO1lBQ1hoQixLQUFLZ0IsRUFBRWhCLEdBQUc7WUFDVkcsTUFBTWEsRUFBRWIsSUFBSTtZQUNaYyxPQUFPRCxFQUFFQyxLQUFLO1lBQ2RDLFVBQVVGLEVBQUVFLFFBQVEsSUFBSTtRQUMxQixJQUNDNUIsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUUwQixLQUFLLEdBQUd6QixFQUFFeUIsS0FBSztJQUVuQyxPQUFPO1FBQ0xSO1FBQ0FLO1FBQ0FLLG1CQUFtQi9CLE9BQU9nQyxJQUFJLENBQUMxQixjQUFjcEIsTUFBTTtJQUNyRDtBQUNGO0FBRUEsOEJBQThCO0FBQzlCLGVBQWVwQixvQkFBb0JmLFNBQVMsRUFBRUMsT0FBTyxFQUFFQyxNQUFNO0lBQzNELE1BQU1vQixhQUFhO1FBQ2pCQyxXQUFXO1lBQUVDLE1BQU14QjtZQUFXeUIsTUFBTXhCO1FBQVE7UUFDNUNLLFFBQVE7WUFBRW9CLEtBQUs7UUFBWSxFQUFFLDJCQUEyQjtJQUMxRDtJQUNBLElBQUl4QixRQUFRb0IsV0FBV3BCLE1BQU0sR0FBR0E7SUFFaEMsTUFBTXlCLFNBQVMsTUFBTWpDLHFEQUFLQSxDQUFDa0MsSUFBSSxDQUFDTjtJQUVoQyxNQUFNNEQsWUFBWXZELE9BQU9HLE1BQU0sQ0FBQyxDQUFDUSxLQUFLTjtRQUNwQyxNQUFNYSxPQUFPLElBQUlyQyxLQUFLd0IsTUFBTVQsU0FBUyxFQUFFdUIsV0FBVyxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDbEUsSUFBSSxDQUFDVCxHQUFHLENBQUNPLEtBQUssRUFBRTtZQUNkUCxHQUFHLENBQUNPLEtBQUssR0FBRztnQkFDVkE7Z0JBQ0FoQixZQUFZO2dCQUNaSyxhQUFhO2dCQUNiaUQsWUFBWTtnQkFDWkMsTUFBTTtnQkFDTkMsTUFBTTtnQkFDTjNDLFVBQVU7WUFDWjtRQUNGO1FBQ0FKLEdBQUcsQ0FBQ08sS0FBSyxDQUFDaEIsVUFBVSxJQUFJRyxNQUFNQyxLQUFLO1FBQ25DSyxHQUFHLENBQUNPLEtBQUssQ0FBQ1gsV0FBVyxJQUFJO1FBQ3pCSSxHQUFHLENBQUNPLEtBQUssQ0FBQ3NDLFVBQVUsSUFBSW5ELE1BQU15QixLQUFLLENBQUMzQixNQUFNLENBQ3hDLENBQUNDLEtBQUsyQixPQUFTM0IsTUFBTTJCLEtBQUtVLFFBQVEsRUFDbEM7UUFFRjlCLEdBQUcsQ0FBQ08sS0FBSyxDQUFDSCxRQUFRLElBQUlWLE1BQU1VLFFBQVEsRUFBRUMsVUFBVVgsTUFBTVUsUUFBUSxJQUFJO1FBRWxFLElBQUlWLE1BQU1RLGFBQWEsS0FBSyxRQUFRO1lBQ2xDRixHQUFHLENBQUNPLEtBQUssQ0FBQ3VDLElBQUksSUFBSXBELE1BQU1DLEtBQUs7UUFDL0IsT0FBTyxJQUFJRCxNQUFNUSxhQUFhLEtBQUssUUFBUTtZQUN6Q0YsR0FBRyxDQUFDTyxLQUFLLENBQUN3QyxJQUFJLElBQUlyRCxNQUFNQyxLQUFLO1FBQy9CO1FBRUEsT0FBT0s7SUFDVCxHQUFHLENBQUM7SUFFSixPQUFPO1FBQ0xnRCxhQUFhckMsT0FBT0MsTUFBTSxDQUFDZ0MsV0FDeEIvQixJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTSxJQUFJN0MsS0FBSzRDLEVBQUVQLElBQUksSUFBSSxJQUFJckMsS0FBSzZDLEVBQUVSLElBQUksR0FDakQyQixHQUFHLENBQUNlLENBQUFBLE1BQVE7Z0JBQ1gsR0FBR0EsR0FBRztnQkFDTjFELFlBQVk0QyxXQUFXYyxJQUFJMUQsVUFBVTtnQkFDckN1RCxNQUFNWCxXQUFXYyxJQUFJSCxJQUFJO2dCQUN6QkMsTUFBTVosV0FBV2MsSUFBSUYsSUFBSTtnQkFDekIzQyxVQUFVK0IsV0FBV2MsSUFBSTdDLFFBQVE7WUFDbkM7SUFDSjtBQUNGO0FBRUEsNENBQTRDO0FBQzVDLGVBQWUxQixzQkFBc0JoQixTQUFTLEVBQUVDLE9BQU8sRUFBRUMsTUFBTTtJQUM3RCxNQUFNb0IsYUFBYTtRQUNqQkMsV0FBVztZQUFFQyxNQUFNeEI7WUFBV3lCLE1BQU14QjtRQUFRO1FBQzVDSyxRQUFRO1lBQUVvQixLQUFLO1FBQVksRUFBRSwyQkFBMkI7SUFDMUQ7SUFDQSxJQUFJeEIsUUFBUW9CLFdBQVdwQixNQUFNLEdBQUdBO0lBRWhDLE1BQU15QixTQUFTLE1BQU1qQyxxREFBS0EsQ0FBQ2tDLElBQUksQ0FBQ047SUFFaEMsTUFBTWtFLGVBQWU3RCxPQUFPRyxNQUFNLENBQUMsQ0FBQ1EsS0FBS047UUFDdkMsTUFBTU8sU0FBU1AsTUFBTVEsYUFBYSxJQUFJO1FBQ3RDLElBQUksQ0FBQ0YsR0FBRyxDQUFDQyxPQUFPLEVBQUU7WUFDaEJELEdBQUcsQ0FBQ0MsT0FBTyxHQUFHO2dCQUNaQTtnQkFDQWtELGFBQWE7Z0JBQ2JDLGtCQUFrQjtnQkFDbEJDLG9CQUFvQjtZQUN0QjtRQUNGO1FBQ0FyRCxHQUFHLENBQUNDLE9BQU8sQ0FBQ2tELFdBQVcsSUFBSXpELE1BQU1DLEtBQUs7UUFDdENLLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDbUQsZ0JBQWdCLElBQUk7UUFDaEMsT0FBT3BEO0lBQ1QsR0FBRyxDQUFDO0lBRUoscUJBQXFCO0lBQ3JCVyxPQUFPQyxNQUFNLENBQUNzQyxjQUFjaEMsT0FBTyxDQUFDb0MsQ0FBQUE7UUFDbENBLEtBQUtELGtCQUFrQixHQUFHQyxLQUFLSCxXQUFXLEdBQUdHLEtBQUtGLGdCQUFnQjtRQUNsRUUsS0FBS0gsV0FBVyxHQUFHaEIsV0FBV21CLEtBQUtILFdBQVc7UUFDOUNHLEtBQUtELGtCQUFrQixHQUFHbEIsV0FBV21CLEtBQUtELGtCQUFrQjtJQUM5RDtJQUVBLE9BQU87UUFDTEUsZ0JBQWdCNUMsT0FBT0MsTUFBTSxDQUFDc0M7UUFDOUJNLG1CQUFtQm5FLE9BQU9RLE1BQU07UUFDaEM0RCxjQUFjdEIsV0FBVzlDLE9BQU9HLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxRQUFVRCxNQUFNQyxNQUFNQyxLQUFLLEVBQUU7SUFDNUU7QUFDRjtBQUVBLGtDQUFrQztBQUNsQyxlQUFlaEIsc0JBQXNCakIsU0FBUyxFQUFFQyxPQUFPLEVBQUVDLE1BQU07SUFDN0QsTUFBTW9CLGFBQWE7UUFDakJDLFdBQVc7WUFBRUMsTUFBTXhCO1lBQVd5QixNQUFNeEI7UUFBUTtRQUM1Q0ssUUFBUTtZQUFFb0IsS0FBSztRQUFZLEVBQUUsMkJBQTJCO0lBQzFEO0lBQ0EsSUFBSXhCLFFBQVFvQixXQUFXcEIsTUFBTSxHQUFHQTtJQUVoQyxNQUFNeUIsU0FBUyxNQUFNakMscURBQUtBLENBQUNrQyxJQUFJLENBQUNOO0lBQ2hDLE1BQU0wRSxXQUFXLE1BQU1yRyx1REFBT0EsQ0FBQ2lDLElBQUksQ0FBQzFCLFNBQVM7UUFBRUE7SUFBTyxJQUFJLENBQUM7SUFFM0QsTUFBTTZGLGVBQWVwRSxPQUFPRyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsUUFBVUQsTUFBTUMsTUFBTUMsS0FBSyxFQUFFO0lBQ3RFLE1BQU1DLGNBQWNQLE9BQU9RLE1BQU07SUFDakMsTUFBTThELGlCQUFpQnRFLE9BQU9HLE1BQU0sQ0FDbEMsQ0FBQ0MsS0FBS0MsUUFDSkQsTUFBTUMsTUFBTXlCLEtBQUssQ0FBQzNCLE1BQU0sQ0FBQyxDQUFDb0UsU0FBU3hDLE9BQVN3QyxVQUFVeEMsS0FBS1UsUUFBUSxFQUFFLElBQ3ZFO0lBRUYsTUFBTStCLGdCQUFnQkgsU0FBUzdELE1BQU07SUFDckMsTUFBTWlFLGdCQUFnQkosU0FBU3BCLE1BQU0sQ0FDbkMsQ0FBQ0MsSUFBTUEsRUFBRUMsS0FBSyxHQUFJRCxDQUFBQSxFQUFFRSxRQUFRLElBQUksRUFBQyxHQUNqQzVDLE1BQU07SUFFUiwyQ0FBMkM7SUFDM0MsTUFBTWtFLHNCQUFzQjtRQUMxQjlFLFdBQVc7WUFBRUMsTUFBTXhCO1lBQVd5QixNQUFNeEI7UUFBUTtRQUM1Q0ssUUFBUTtJQUNWO0lBQ0EsSUFBSUosUUFBUW1HLG9CQUFvQm5HLE1BQU0sR0FBR0E7SUFDekMsTUFBTW9HLGtCQUFrQixNQUFNNUcscURBQUtBLENBQUM2RyxjQUFjLENBQUNGO0lBRW5ELGtEQUFrRDtJQUNsRCxNQUFNRyxlQUFldkcsVUFBVUQ7SUFDL0IsTUFBTXlHLGdCQUFnQixJQUFJakcsS0FBS1IsVUFBVTBHLE9BQU8sS0FBS0Y7SUFDckQsTUFBTUcsY0FBYzNHO0lBRXBCLE1BQU00RyxxQkFBcUI7UUFDekJyRixXQUFXO1lBQUVDLE1BQU1pRjtZQUFlaEYsTUFBTWtGO1FBQVk7UUFDcERyRyxRQUFRO1lBQUVvQixLQUFLO1FBQVksRUFBRSw4Q0FBOEM7SUFDN0U7SUFDQSxJQUFJeEIsUUFBUTBHLG1CQUFtQjFHLE1BQU0sR0FBR0E7SUFFeEMsTUFBTTJHLGlCQUFpQixNQUFNbkgscURBQUtBLENBQUNrQyxJQUFJLENBQUNnRjtJQUN4QyxNQUFNRSxrQkFBa0JELGVBQWUvRSxNQUFNLENBQzNDLENBQUNDLEtBQUtDLFFBQVVELE1BQU1DLE1BQU1DLEtBQUssRUFDakM7SUFHRixNQUFNOEUsZ0JBQ0pELGtCQUFrQixJQUNiLENBQUVmLGVBQWVlLGVBQWMsSUFBS0Esa0JBQW1CLE1BQ3hEZixlQUFlLElBQUksV0FBVztJQUVwQyxNQUFNaUIsY0FDSkgsZUFBZTFFLE1BQU0sR0FBRyxJQUNuQixDQUFFRCxjQUFjMkUsZUFBZTFFLE1BQU0sSUFBSTBFLGVBQWUxRSxNQUFNLEdBQUksTUFDbkVELGNBQWMsSUFBSSxXQUFXO0lBRW5DLE9BQU87UUFDTDZELGNBQWNBO1FBQ2Q3RDtRQUNBK0Q7UUFDQUU7UUFDQUM7UUFDQUU7UUFDQWxFLG1CQUFvQjJELGVBQWU3RCxlQUFlO1FBQ2xENkUsZUFBZSxHQUFHQSxjQUFjLENBQUMsQ0FBQztRQUNsQ0MsYUFBYSxHQUFHQSxZQUFZLENBQUMsQ0FBQztRQUM5QkMsdUJBQXVCSDtRQUN2Qkksc0JBQXNCTCxlQUFlMUUsTUFBTTtJQUM3QztBQUNGO0FBRU8sZUFBZWdGLElBQUlySCxPQUFPO0lBQy9CLE9BQU9GLHFEQUFZQSxDQUFDTyxJQUFJLENBQ3RCO1FBQ0VFLFNBQVM7UUFDVCtHLGtCQUFrQjtZQUFDO1lBQVM7WUFBWTtZQUFTO1lBQVc7U0FBVTtJQUN4RSxHQUNBO1FBQUU5RyxRQUFRO0lBQUk7QUFFbEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERvd25sb2Fkc1xcZ2l0aHViXFxwaG9uZS1zdG9yZVxcc3JjXFxhcHBcXGFwaVxccmVwb3J0c1xccm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbm5lY3REQiBmcm9tIFwiLi4vLi4vLi4vbGliL21vbmdvZGJcIjtcclxuaW1wb3J0IE9yZGVyIGZyb20gXCIuLi8uLi8uLi9tb2RlbHMvT3JkZXJcIjtcclxuaW1wb3J0IFByb2R1Y3QgZnJvbSBcIi4uLy4uLy4uL21vZGVscy9Qcm9kdWN0XCI7XHJcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcclxuICAgIGNvbnN0IHsgcmVwb3J0VHlwZSwgc3RhcnREYXRlLCBlbmREYXRlLCB1c2VySWQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgIGlmICghcmVwb3J0VHlwZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJSZXBvcnQgdHlwZSBpcyByZXF1aXJlZFwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVmYXVsdCB0byBsYXN0IDMwIGRheXMgaWYgbm8gZGF0ZXMgcHJvdmlkZWRcclxuICAgIGNvbnN0IHN0YXJ0ID0gc3RhcnREYXRlXHJcbiAgICAgID8gbmV3IERhdGUoc3RhcnREYXRlKVxyXG4gICAgICA6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG4gICAgY29uc3QgZW5kID0gZW5kRGF0ZSA/IG5ldyBEYXRlKGVuZERhdGUpIDogbmV3IERhdGUoKTtcclxuXHJcbiAgICAvLyBTZXQgZW5kIGRhdGUgdG8gZW5kIG9mIGRheVxyXG4gICAgZW5kLnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSk7XHJcblxyXG4gICAgbGV0IHJlcG9ydERhdGEgPSB7fTtcclxuXHJcbiAgICBzd2l0Y2ggKHJlcG9ydFR5cGUpIHtcclxuICAgICAgY2FzZSBcInNhbGVzXCI6XHJcbiAgICAgICAgcmVwb3J0RGF0YSA9IGF3YWl0IGdlbmVyYXRlU2FsZXNSZXBvcnQoc3RhcnQsIGVuZCwgdXNlcklkKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInByb2R1Y3RzXCI6XHJcbiAgICAgICAgcmVwb3J0RGF0YSA9IGF3YWl0IGdlbmVyYXRlUHJvZHVjdFJlcG9ydChzdGFydCwgZW5kLCB1c2VySWQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiZGFpbHlcIjpcclxuICAgICAgICByZXBvcnREYXRhID0gYXdhaXQgZ2VuZXJhdGVEYWlseVJlcG9ydChzdGFydCwgZW5kLCB1c2VySWQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicGF5bWVudFwiOlxyXG4gICAgICAgIHJlcG9ydERhdGEgPSBhd2FpdCBnZW5lcmF0ZVBheW1lbnRSZXBvcnQoc3RhcnQsIGVuZCwgdXNlcklkKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInN1bW1hcnlcIjpcclxuICAgICAgICByZXBvcnREYXRhID0gYXdhaXQgZ2VuZXJhdGVTdW1tYXJ5UmVwb3J0KHN0YXJ0LCBlbmQsIHVzZXJJZCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIHJlcG9ydCB0eXBlXCIgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBkYXRhOiByZXBvcnREYXRhLFxyXG4gICAgICAgIHBlcmlvZDogeyBzdGFydCwgZW5kIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIlJlcG9ydCBnZW5lcmF0aW9uIGVycm9yOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcmVwb3J0XCIgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gU2FsZXMgUmVwb3J0IC0gT3ZlcmFsbCBzYWxlcyBzdGF0aXN0aWNzXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlU2FsZXNSZXBvcnQoc3RhcnREYXRlLCBlbmREYXRlLCB1c2VySWQpIHtcclxuICBjb25zdCBtYXRjaFF1ZXJ5ID0ge1xyXG4gICAgY3JlYXRlZEF0OiB7ICRndGU6IHN0YXJ0RGF0ZSwgJGx0ZTogZW5kRGF0ZSB9LFxyXG4gICAgc3RhdHVzOiB7ICRuZTogJ2NhbmNlbGxlZCcgfSAvLyBFeGNsdWRlIGNhbmNlbGxlZCBvcmRlcnNcclxuICB9O1xyXG4gIGlmICh1c2VySWQpIG1hdGNoUXVlcnkudXNlcklkID0gdXNlcklkO1xyXG5cclxuICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5maW5kKG1hdGNoUXVlcnkpO1xyXG5cclxuICBjb25zdCB0b3RhbFNhbGVzID0gb3JkZXJzLnJlZHVjZSgoc3VtLCBvcmRlcikgPT4gc3VtICsgb3JkZXIudG90YWwsIDApO1xyXG4gIGNvbnN0IHRvdGFsT3JkZXJzID0gb3JkZXJzLmxlbmd0aDtcclxuICBjb25zdCBhdmVyYWdlT3JkZXJWYWx1ZSA9IHRvdGFsT3JkZXJzID4gMCA/IHRvdGFsU2FsZXMgLyB0b3RhbE9yZGVycyA6IDA7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSB0b3RhbHMgYnkgcGF5bWVudCBtZXRob2RcclxuICBjb25zdCBwYXltZW50QnJlYWtkb3duID0gb3JkZXJzLnJlZHVjZSgoYWNjLCBvcmRlcikgPT4ge1xyXG4gICAgY29uc3QgbWV0aG9kID0gb3JkZXIucGF5bWVudE1ldGhvZCB8fCBcImNhc2hcIjtcclxuICAgIGFjY1ttZXRob2RdID0gKGFjY1ttZXRob2RdIHx8IDApICsgb3JkZXIudG90YWw7XHJcbiAgICByZXR1cm4gYWNjO1xyXG4gIH0sIHt9KTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIGRpc2NvdW50IHRvdGFsc1xyXG4gIGNvbnN0IHRvdGFsRGlzY291bnQgPSBvcmRlcnMucmVkdWNlKFxyXG4gICAgKHN1bSwgb3JkZXIpID0+IHN1bSArIChvcmRlci5kaXNjb3VudD8uYW1vdW50IHx8IG9yZGVyLmRpc2NvdW50IHx8IDApLFxyXG4gICAgMFxyXG4gICk7XHJcblxyXG4gIC8vIERhaWx5IHNhbGVzIHRyZW5kXHJcbiAgY29uc3QgZGFpbHlTYWxlcyA9IG9yZGVycy5yZWR1Y2UoKGFjYywgb3JkZXIpID0+IHtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShvcmRlci5jcmVhdGVkQXQpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xyXG4gICAgaWYgKCFhY2NbZGF0ZV0pIHtcclxuICAgICAgYWNjW2RhdGVdID0geyBkYXRlLCBzYWxlczogMCwgb3JkZXJzOiAwIH07XHJcbiAgICB9XHJcbiAgICBhY2NbZGF0ZV0uc2FsZXMgKz0gb3JkZXIudG90YWw7XHJcbiAgICBhY2NbZGF0ZV0ub3JkZXJzICs9IDE7XHJcbiAgICByZXR1cm4gYWNjO1xyXG4gIH0sIHt9KTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHRvdGFsU2FsZXM6IHRvdGFsU2FsZXMsXHJcbiAgICB0b3RhbE9yZGVycyxcclxuICAgIGF2ZXJhZ2VPcmRlclZhbHVlOiBhdmVyYWdlT3JkZXJWYWx1ZSxcclxuICAgIHRvdGFsRGlzY291bnQ6IHRvdGFsRGlzY291bnQsXHJcbiAgICBwYXltZW50QnJlYWtkb3duLFxyXG4gICAgZGFpbHlTYWxlczogT2JqZWN0LnZhbHVlcyhkYWlseVNhbGVzKS5zb3J0KFxyXG4gICAgICAoYSwgYikgPT4gbmV3IERhdGUoYS5kYXRlKSAtIG5ldyBEYXRlKGIuZGF0ZSlcclxuICAgICksXHJcbiAgfTtcclxufVxyXG5cclxuLy8gUHJvZHVjdCBSZXBvcnQgLSBCZXN0IHNlbGxpbmcgcHJvZHVjdHNcclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQcm9kdWN0UmVwb3J0KHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdXNlcklkKSB7XHJcbiAgY29uc3QgbWF0Y2hRdWVyeSA9IHtcclxuICAgIGNyZWF0ZWRBdDogeyAkZ3RlOiBzdGFydERhdGUsICRsdGU6IGVuZERhdGUgfSxcclxuICAgIHN0YXR1czogeyAkbmU6ICdjYW5jZWxsZWQnIH0gLy8gRXhjbHVkZSBjYW5jZWxsZWQgb3JkZXJzXHJcbiAgfTtcclxuICBpZiAodXNlcklkKSBtYXRjaFF1ZXJ5LnVzZXJJZCA9IHVzZXJJZDtcclxuXHJcbiAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZChtYXRjaFF1ZXJ5KS5wb3B1bGF0ZSgnaXRlbXMucHJvZHVjdCcpO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgcHJvZHVjdCBzdGF0aXN0aWNzXHJcbiAgY29uc3QgcHJvZHVjdFN0YXRzID0ge307XHJcblxyXG4gIG9yZGVycy5mb3JFYWNoKChvcmRlcikgPT4ge1xyXG4gICAgb3JkZXIuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBwcm9kdWN0SWQgPSAoaXRlbS5wcm9kdWN0Py5faWQgfHwgaXRlbS5wcm9kdWN0IHx8IGl0ZW0ucHJvZHVjdElkKS50b1N0cmluZygpO1xyXG4gICAgICBjb25zdCBwcm9kdWN0TmFtZSA9IGl0ZW0ucHJvZHVjdD8ubmFtZSB8fCBpdGVtLm5hbWUgfHwgJ1Vua25vd24gUHJvZHVjdCc7XHJcblxyXG4gICAgICBpZiAoIXByb2R1Y3RTdGF0c1twcm9kdWN0SWRdKSB7XHJcbiAgICAgICAgcHJvZHVjdFN0YXRzW3Byb2R1Y3RJZF0gPSB7XHJcbiAgICAgICAgICBwcm9kdWN0SWQsXHJcbiAgICAgICAgICBuYW1lOiBwcm9kdWN0TmFtZSxcclxuICAgICAgICAgIHF1YW50aXR5U29sZDogMCxcclxuICAgICAgICAgIHJldmVudWU6IDAsXHJcbiAgICAgICAgICB0aW1lc09yZGVyZWQ6IDAsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBwcm9kdWN0U3RhdHNbcHJvZHVjdElkXS5xdWFudGl0eVNvbGQgKz0gaXRlbS5xdWFudGl0eTtcclxuICAgICAgcHJvZHVjdFN0YXRzW3Byb2R1Y3RJZF0ucmV2ZW51ZSArPSBpdGVtLnByaWNlICogaXRlbS5xdWFudGl0eTtcclxuICAgICAgcHJvZHVjdFN0YXRzW3Byb2R1Y3RJZF0udGltZXNPcmRlcmVkICs9IDE7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gQ29udmVydCB0byBhcnJheSBhbmQgc29ydCBieSByZXZlbnVlXHJcbiAgY29uc3QgdG9wUHJvZHVjdHMgPSBPYmplY3QudmFsdWVzKHByb2R1Y3RTdGF0cylcclxuICAgIC5zb3J0KChhLCBiKSA9PiBiLnJldmVudWUgLSBhLnJldmVudWUpXHJcbiAgICAuc2xpY2UoMCwgMjApXHJcbiAgICAubWFwKHByb2R1Y3QgPT4gKHtcclxuICAgICAgLi4ucHJvZHVjdCxcclxuICAgICAgcmV2ZW51ZTogcGFyc2VGbG9hdChwcm9kdWN0LnJldmVudWUpXHJcbiAgICB9KSk7XHJcblxyXG4gIC8vIEdldCBsb3cgc3RvY2sgcHJvZHVjdHNcclxuICBjb25zdCBhbGxQcm9kdWN0cyA9IGF3YWl0IFByb2R1Y3QuZmluZCh1c2VySWQgPyB7IHVzZXJJZCB9IDoge30pO1xyXG4gIGNvbnN0IGxvd1N0b2NrUHJvZHVjdHMgPSBhbGxQcm9kdWN0c1xyXG4gICAgLmZpbHRlcigocCkgPT4gcC5zdG9jayA8IChwLm1pblN0b2NrIHx8IDEwKSlcclxuICAgIC5tYXAoKHApID0+ICh7XHJcbiAgICAgIF9pZDogcC5faWQsXHJcbiAgICAgIG5hbWU6IHAubmFtZSxcclxuICAgICAgc3RvY2s6IHAuc3RvY2ssXHJcbiAgICAgIG1pblN0b2NrOiBwLm1pblN0b2NrIHx8IDEwLFxyXG4gICAgfSkpXHJcbiAgICAuc29ydCgoYSwgYikgPT4gYS5zdG9jayAtIGIuc3RvY2spO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdG9wUHJvZHVjdHMsXHJcbiAgICBsb3dTdG9ja1Byb2R1Y3RzLFxyXG4gICAgdG90YWxQcm9kdWN0c1NvbGQ6IE9iamVjdC5rZXlzKHByb2R1Y3RTdGF0cykubGVuZ3RoLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vIERhaWx5IFJlcG9ydCAtIFNhbGVzIGJ5IGRheVxyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZURhaWx5UmVwb3J0KHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdXNlcklkKSB7XHJcbiAgY29uc3QgbWF0Y2hRdWVyeSA9IHtcclxuICAgIGNyZWF0ZWRBdDogeyAkZ3RlOiBzdGFydERhdGUsICRsdGU6IGVuZERhdGUgfSxcclxuICAgIHN0YXR1czogeyAkbmU6ICdjYW5jZWxsZWQnIH0gLy8gRXhjbHVkZSBjYW5jZWxsZWQgb3JkZXJzXHJcbiAgfTtcclxuICBpZiAodXNlcklkKSBtYXRjaFF1ZXJ5LnVzZXJJZCA9IHVzZXJJZDtcclxuXHJcbiAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZChtYXRjaFF1ZXJ5KTtcclxuXHJcbiAgY29uc3QgZGFpbHlEYXRhID0gb3JkZXJzLnJlZHVjZSgoYWNjLCBvcmRlcikgPT4ge1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKG9yZGVyLmNyZWF0ZWRBdCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF07XHJcbiAgICBpZiAoIWFjY1tkYXRlXSkge1xyXG4gICAgICBhY2NbZGF0ZV0gPSB7XHJcbiAgICAgICAgZGF0ZSxcclxuICAgICAgICB0b3RhbFNhbGVzOiAwLFxyXG4gICAgICAgIHRvdGFsT3JkZXJzOiAwLFxyXG4gICAgICAgIHRvdGFsSXRlbXM6IDAsXHJcbiAgICAgICAgY2FzaDogMCxcclxuICAgICAgICBjYXJkOiAwLFxyXG4gICAgICAgIGRpc2NvdW50OiAwLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgYWNjW2RhdGVdLnRvdGFsU2FsZXMgKz0gb3JkZXIudG90YWw7XHJcbiAgICBhY2NbZGF0ZV0udG90YWxPcmRlcnMgKz0gMTtcclxuICAgIGFjY1tkYXRlXS50b3RhbEl0ZW1zICs9IG9yZGVyLml0ZW1zLnJlZHVjZShcclxuICAgICAgKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5xdWFudGl0eSxcclxuICAgICAgMFxyXG4gICAgKTtcclxuICAgIGFjY1tkYXRlXS5kaXNjb3VudCArPSBvcmRlci5kaXNjb3VudD8uYW1vdW50IHx8IG9yZGVyLmRpc2NvdW50IHx8IDA7XHJcblxyXG4gICAgaWYgKG9yZGVyLnBheW1lbnRNZXRob2QgPT09IFwiY2FzaFwiKSB7XHJcbiAgICAgIGFjY1tkYXRlXS5jYXNoICs9IG9yZGVyLnRvdGFsO1xyXG4gICAgfSBlbHNlIGlmIChvcmRlci5wYXltZW50TWV0aG9kID09PSBcImNhcmRcIikge1xyXG4gICAgICBhY2NbZGF0ZV0uY2FyZCArPSBvcmRlci50b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYWNjO1xyXG4gIH0sIHt9KTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGRhaWx5UmVwb3J0OiBPYmplY3QudmFsdWVzKGRhaWx5RGF0YSlcclxuICAgICAgLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGEuZGF0ZSkgLSBuZXcgRGF0ZShiLmRhdGUpKVxyXG4gICAgICAubWFwKGRheSA9PiAoe1xyXG4gICAgICAgIC4uLmRheSxcclxuICAgICAgICB0b3RhbFNhbGVzOiBwYXJzZUZsb2F0KGRheS50b3RhbFNhbGVzKSxcclxuICAgICAgICBjYXNoOiBwYXJzZUZsb2F0KGRheS5jYXNoKSxcclxuICAgICAgICBjYXJkOiBwYXJzZUZsb2F0KGRheS5jYXJkKSxcclxuICAgICAgICBkaXNjb3VudDogcGFyc2VGbG9hdChkYXkuZGlzY291bnQpXHJcbiAgICAgIH0pKSxcclxuICB9O1xyXG59XHJcblxyXG4vLyBQYXltZW50IFJlcG9ydCAtIFBheW1lbnQgbWV0aG9kIGJyZWFrZG93blxyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVBheW1lbnRSZXBvcnQoc3RhcnREYXRlLCBlbmREYXRlLCB1c2VySWQpIHtcclxuICBjb25zdCBtYXRjaFF1ZXJ5ID0ge1xyXG4gICAgY3JlYXRlZEF0OiB7ICRndGU6IHN0YXJ0RGF0ZSwgJGx0ZTogZW5kRGF0ZSB9LFxyXG4gICAgc3RhdHVzOiB7ICRuZTogJ2NhbmNlbGxlZCcgfSAvLyBFeGNsdWRlIGNhbmNlbGxlZCBvcmRlcnNcclxuICB9O1xyXG4gIGlmICh1c2VySWQpIG1hdGNoUXVlcnkudXNlcklkID0gdXNlcklkO1xyXG5cclxuICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5maW5kKG1hdGNoUXVlcnkpO1xyXG5cclxuICBjb25zdCBwYXltZW50U3RhdHMgPSBvcmRlcnMucmVkdWNlKChhY2MsIG9yZGVyKSA9PiB7XHJcbiAgICBjb25zdCBtZXRob2QgPSBvcmRlci5wYXltZW50TWV0aG9kIHx8IFwiY2FzaFwiO1xyXG4gICAgaWYgKCFhY2NbbWV0aG9kXSkge1xyXG4gICAgICBhY2NbbWV0aG9kXSA9IHtcclxuICAgICAgICBtZXRob2QsXHJcbiAgICAgICAgdG90YWxBbW91bnQ6IDAsXHJcbiAgICAgICAgdHJhbnNhY3Rpb25Db3VudDogMCxcclxuICAgICAgICBhdmVyYWdlVHJhbnNhY3Rpb246IDAsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhY2NbbWV0aG9kXS50b3RhbEFtb3VudCArPSBvcmRlci50b3RhbDtcclxuICAgIGFjY1ttZXRob2RdLnRyYW5zYWN0aW9uQ291bnQgKz0gMTtcclxuICAgIHJldHVybiBhY2M7XHJcbiAgfSwge30pO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgYXZlcmFnZXNcclxuICBPYmplY3QudmFsdWVzKHBheW1lbnRTdGF0cykuZm9yRWFjaChzdGF0ID0+IHtcclxuICAgIHN0YXQuYXZlcmFnZVRyYW5zYWN0aW9uID0gc3RhdC50b3RhbEFtb3VudCAvIHN0YXQudHJhbnNhY3Rpb25Db3VudDtcclxuICAgIHN0YXQudG90YWxBbW91bnQgPSBwYXJzZUZsb2F0KHN0YXQudG90YWxBbW91bnQpO1xyXG4gICAgc3RhdC5hdmVyYWdlVHJhbnNhY3Rpb24gPSBwYXJzZUZsb2F0KHN0YXQuYXZlcmFnZVRyYW5zYWN0aW9uKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHBheW1lbnRNZXRob2RzOiBPYmplY3QudmFsdWVzKHBheW1lbnRTdGF0cyksXHJcbiAgICB0b3RhbFRyYW5zYWN0aW9uczogb3JkZXJzLmxlbmd0aCxcclxuICAgIHRvdGFsUmV2ZW51ZTogcGFyc2VGbG9hdChvcmRlcnMucmVkdWNlKChzdW0sIG9yZGVyKSA9PiBzdW0gKyBvcmRlci50b3RhbCwgMCkpLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vIFN1bW1hcnkgUmVwb3J0IC0gUXVpY2sgb3ZlcnZpZXdcclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVTdW1tYXJ5UmVwb3J0KHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdXNlcklkKSB7XHJcbiAgY29uc3QgbWF0Y2hRdWVyeSA9IHtcclxuICAgIGNyZWF0ZWRBdDogeyAkZ3RlOiBzdGFydERhdGUsICRsdGU6IGVuZERhdGUgfSxcclxuICAgIHN0YXR1czogeyAkbmU6ICdjYW5jZWxsZWQnIH0gLy8gRXhjbHVkZSBjYW5jZWxsZWQgb3JkZXJzXHJcbiAgfTtcclxuICBpZiAodXNlcklkKSBtYXRjaFF1ZXJ5LnVzZXJJZCA9IHVzZXJJZDtcclxuXHJcbiAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZChtYXRjaFF1ZXJ5KTtcclxuICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IFByb2R1Y3QuZmluZCh1c2VySWQgPyB7IHVzZXJJZCB9IDoge30pO1xyXG5cclxuICBjb25zdCB0b3RhbFJldmVudWUgPSBvcmRlcnMucmVkdWNlKChzdW0sIG9yZGVyKSA9PiBzdW0gKyBvcmRlci50b3RhbCwgMCk7XHJcbiAgY29uc3QgdG90YWxPcmRlcnMgPSBvcmRlcnMubGVuZ3RoO1xyXG4gIGNvbnN0IHRvdGFsSXRlbXNTb2xkID0gb3JkZXJzLnJlZHVjZShcclxuICAgIChzdW0sIG9yZGVyKSA9PlxyXG4gICAgICBzdW0gKyBvcmRlci5pdGVtcy5yZWR1Y2UoKGl0ZW1TdW0sIGl0ZW0pID0+IGl0ZW1TdW0gKyBpdGVtLnF1YW50aXR5LCAwKSxcclxuICAgIDBcclxuICApO1xyXG4gIGNvbnN0IHRvdGFsUHJvZHVjdHMgPSBwcm9kdWN0cy5sZW5ndGg7XHJcbiAgY29uc3QgbG93U3RvY2tDb3VudCA9IHByb2R1Y3RzLmZpbHRlcihcclxuICAgIChwKSA9PiBwLnN0b2NrIDwgKHAubWluU3RvY2sgfHwgMTApXHJcbiAgKS5sZW5ndGg7XHJcblxyXG4gIC8vIEdldCBjYW5jZWxsZWQgb3JkZXJzIGNvdW50IGZvciByZWZlcmVuY2VcclxuICBjb25zdCBjYW5jZWxsZWRNYXRjaFF1ZXJ5ID0ge1xyXG4gICAgY3JlYXRlZEF0OiB7ICRndGU6IHN0YXJ0RGF0ZSwgJGx0ZTogZW5kRGF0ZSB9LFxyXG4gICAgc3RhdHVzOiAnY2FuY2VsbGVkJ1xyXG4gIH07XHJcbiAgaWYgKHVzZXJJZCkgY2FuY2VsbGVkTWF0Y2hRdWVyeS51c2VySWQgPSB1c2VySWQ7XHJcbiAgY29uc3QgY2FuY2VsbGVkT3JkZXJzID0gYXdhaXQgT3JkZXIuY291bnREb2N1bWVudHMoY2FuY2VsbGVkTWF0Y2hRdWVyeSk7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBncm93dGggKGNvbXBhcmUgd2l0aCBwcmV2aW91cyBwZXJpb2QpXHJcbiAgY29uc3QgcGVyaW9kTGVuZ3RoID0gZW5kRGF0ZSAtIHN0YXJ0RGF0ZTtcclxuICBjb25zdCBwcmV2aW91c1N0YXJ0ID0gbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSAtIHBlcmlvZExlbmd0aCk7XHJcbiAgY29uc3QgcHJldmlvdXNFbmQgPSBzdGFydERhdGU7XHJcblxyXG4gIGNvbnN0IHByZXZpb3VzTWF0Y2hRdWVyeSA9IHtcclxuICAgIGNyZWF0ZWRBdDogeyAkZ3RlOiBwcmV2aW91c1N0YXJ0LCAkbHRlOiBwcmV2aW91c0VuZCB9LFxyXG4gICAgc3RhdHVzOiB7ICRuZTogJ2NhbmNlbGxlZCcgfSAvLyBBbHNvIGV4Y2x1ZGUgY2FuY2VsbGVkIGZyb20gcHJldmlvdXMgcGVyaW9kXHJcbiAgfTtcclxuICBpZiAodXNlcklkKSBwcmV2aW91c01hdGNoUXVlcnkudXNlcklkID0gdXNlcklkO1xyXG5cclxuICBjb25zdCBwcmV2aW91c09yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQocHJldmlvdXNNYXRjaFF1ZXJ5KTtcclxuICBjb25zdCBwcmV2aW91c1JldmVudWUgPSBwcmV2aW91c09yZGVycy5yZWR1Y2UoXHJcbiAgICAoc3VtLCBvcmRlcikgPT4gc3VtICsgb3JkZXIudG90YWwsXHJcbiAgICAwXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgcmV2ZW51ZUdyb3d0aCA9XHJcbiAgICBwcmV2aW91c1JldmVudWUgPiAwXHJcbiAgICAgID8gKCgodG90YWxSZXZlbnVlIC0gcHJldmlvdXNSZXZlbnVlKSAvIHByZXZpb3VzUmV2ZW51ZSkgKiAxMDApXHJcbiAgICAgIDogdG90YWxSZXZlbnVlID4gMCA/IFwiMTAwLjAwXCIgOiBcIjAuMDBcIjtcclxuXHJcbiAgY29uc3Qgb3JkZXJHcm93dGggPVxyXG4gICAgcHJldmlvdXNPcmRlcnMubGVuZ3RoID4gMFxyXG4gICAgICA/ICgoKHRvdGFsT3JkZXJzIC0gcHJldmlvdXNPcmRlcnMubGVuZ3RoKSAvIHByZXZpb3VzT3JkZXJzLmxlbmd0aCkgKiAxMDApXHJcbiAgICAgIDogdG90YWxPcmRlcnMgPiAwID8gXCIxMDAuMDBcIiA6IFwiMC4wMFwiO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdG90YWxSZXZlbnVlOiB0b3RhbFJldmVudWUsXHJcbiAgICB0b3RhbE9yZGVycyxcclxuICAgIHRvdGFsSXRlbXNTb2xkLFxyXG4gICAgdG90YWxQcm9kdWN0cyxcclxuICAgIGxvd1N0b2NrQ291bnQsXHJcbiAgICBjYW5jZWxsZWRPcmRlcnMsXHJcbiAgICBhdmVyYWdlT3JkZXJWYWx1ZTogKHRvdGFsUmV2ZW51ZSAvIHRvdGFsT3JkZXJzIHx8IDApLFxyXG4gICAgcmV2ZW51ZUdyb3d0aDogYCR7cmV2ZW51ZUdyb3d0aH0lYCxcclxuICAgIG9yZGVyR3Jvd3RoOiBgJHtvcmRlckdyb3d0aH0lYCxcclxuICAgIHByZXZpb3VzUGVyaW9kUmV2ZW51ZTogcHJldmlvdXNSZXZlbnVlLFxyXG4gICAgcHJldmlvdXNQZXJpb2RPcmRlcnM6IHByZXZpb3VzT3JkZXJzLmxlbmd0aCxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICB7XHJcbiAgICAgIG1lc3NhZ2U6IFwiVXNlIFBPU1QgbWV0aG9kIHdpdGggcmVwb3J0VHlwZSBwYXJhbWV0ZXJcIixcclxuICAgICAgYXZhaWxhYmxlUmVwb3J0czogW1wic2FsZXNcIiwgXCJwcm9kdWN0c1wiLCBcImRhaWx5XCIsIFwicGF5bWVudFwiLCBcInN1bW1hcnlcIl0sXHJcbiAgICB9LFxyXG4gICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgKTtcclxufSJdLCJuYW1lcyI6WyJjb25uZWN0REIiLCJPcmRlciIsIlByb2R1Y3QiLCJOZXh0UmVzcG9uc2UiLCJQT1NUIiwicmVxdWVzdCIsInJlcG9ydFR5cGUiLCJzdGFydERhdGUiLCJlbmREYXRlIiwidXNlcklkIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwic3RhdHVzIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZW5kIiwic2V0SG91cnMiLCJyZXBvcnREYXRhIiwiZ2VuZXJhdGVTYWxlc1JlcG9ydCIsImdlbmVyYXRlUHJvZHVjdFJlcG9ydCIsImdlbmVyYXRlRGFpbHlSZXBvcnQiLCJnZW5lcmF0ZVBheW1lbnRSZXBvcnQiLCJnZW5lcmF0ZVN1bW1hcnlSZXBvcnQiLCJkYXRhIiwicGVyaW9kIiwiZXJyb3IiLCJjb25zb2xlIiwibWF0Y2hRdWVyeSIsImNyZWF0ZWRBdCIsIiRndGUiLCIkbHRlIiwiJG5lIiwib3JkZXJzIiwiZmluZCIsInRvdGFsU2FsZXMiLCJyZWR1Y2UiLCJzdW0iLCJvcmRlciIsInRvdGFsIiwidG90YWxPcmRlcnMiLCJsZW5ndGgiLCJhdmVyYWdlT3JkZXJWYWx1ZSIsInBheW1lbnRCcmVha2Rvd24iLCJhY2MiLCJtZXRob2QiLCJwYXltZW50TWV0aG9kIiwidG90YWxEaXNjb3VudCIsImRpc2NvdW50IiwiYW1vdW50IiwiZGFpbHlTYWxlcyIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0Iiwic2FsZXMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJwb3B1bGF0ZSIsInByb2R1Y3RTdGF0cyIsImZvckVhY2giLCJpdGVtcyIsIml0ZW0iLCJwcm9kdWN0SWQiLCJwcm9kdWN0IiwiX2lkIiwidG9TdHJpbmciLCJwcm9kdWN0TmFtZSIsIm5hbWUiLCJxdWFudGl0eVNvbGQiLCJyZXZlbnVlIiwidGltZXNPcmRlcmVkIiwicXVhbnRpdHkiLCJwcmljZSIsInRvcFByb2R1Y3RzIiwic2xpY2UiLCJtYXAiLCJwYXJzZUZsb2F0IiwiYWxsUHJvZHVjdHMiLCJsb3dTdG9ja1Byb2R1Y3RzIiwiZmlsdGVyIiwicCIsInN0b2NrIiwibWluU3RvY2siLCJ0b3RhbFByb2R1Y3RzU29sZCIsImtleXMiLCJkYWlseURhdGEiLCJ0b3RhbEl0ZW1zIiwiY2FzaCIsImNhcmQiLCJkYWlseVJlcG9ydCIsImRheSIsInBheW1lbnRTdGF0cyIsInRvdGFsQW1vdW50IiwidHJhbnNhY3Rpb25Db3VudCIsImF2ZXJhZ2VUcmFuc2FjdGlvbiIsInN0YXQiLCJwYXltZW50TWV0aG9kcyIsInRvdGFsVHJhbnNhY3Rpb25zIiwidG90YWxSZXZlbnVlIiwicHJvZHVjdHMiLCJ0b3RhbEl0ZW1zU29sZCIsIml0ZW1TdW0iLCJ0b3RhbFByb2R1Y3RzIiwibG93U3RvY2tDb3VudCIsImNhbmNlbGxlZE1hdGNoUXVlcnkiLCJjYW5jZWxsZWRPcmRlcnMiLCJjb3VudERvY3VtZW50cyIsInBlcmlvZExlbmd0aCIsInByZXZpb3VzU3RhcnQiLCJnZXRUaW1lIiwicHJldmlvdXNFbmQiLCJwcmV2aW91c01hdGNoUXVlcnkiLCJwcmV2aW91c09yZGVycyIsInByZXZpb3VzUmV2ZW51ZSIsInJldmVudWVHcm93dGgiLCJvcmRlckdyb3d0aCIsInByZXZpb3VzUGVyaW9kUmV2ZW51ZSIsInByZXZpb3VzUGVyaW9kT3JkZXJzIiwiR0VUIiwiYXZhaWxhYmxlUmVwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/reports/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.js":
/*!****************************!*\
  !*** ./src/lib/mongodb.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_Counter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/Counter.js */ \"(rsc)/./src/models/Counter.js\");\n/* harmony import */ var _models_Brand_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/Brand.js */ \"(rsc)/./src/models/Brand.js\");\n/* harmony import */ var _models_Category_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/Category.js */ \"(rsc)/./src/models/Category.js\");\n/* harmony import */ var _models_Product_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/Product.js */ \"(rsc)/./src/models/Product.js\");\n\n\n\n\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable');\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnQztBQUNGO0FBQ0Y7QUFDRztBQUNEO0FBRTlCLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUUzQyxJQUFJLENBQUNBLGFBQWE7SUFDaEIsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBRUEsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7UUFDbEI7UUFFQU4sT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVMsTUFBTUcsSUFBSSxDQUFDLENBQUNiO1lBQ3pELE9BQU9BO1FBQ1Q7SUFDRjtJQUVBLElBQUk7UUFDRkssT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDcEMsRUFBRSxPQUFPTSxHQUFHO1FBQ1ZULE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNTTtJQUNSO0lBRUEsT0FBT1QsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEb3dubG9hZHNcXGdpdGh1YlxccGhvbmUtc3RvcmVcXHNyY1xcbGliXFxtb25nb2RiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmltcG9ydCAnLi4vbW9kZWxzL0NvdW50ZXIuanMnO1xyXG5pbXBvcnQgJy4uL21vZGVscy9CcmFuZC5qcyc7XHJcbmltcG9ydCAnLi4vbW9kZWxzL0NhdGVnb3J5LmpzJztcclxuaW1wb3J0ICcuLi9tb2RlbHMvUHJvZHVjdC5qcyc7XHJcblxyXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xyXG5cclxuaWYgKCFNT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxufVxyXG5cclxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZTtcclxuXHJcbmlmICghY2FjaGVkKSB7XHJcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3REQigpIHtcclxuICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgIHJldHVybiBjYWNoZWQuY29ubjtcclxuICB9XHJcblxyXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcclxuICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gbW9uZ29vc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcclxuICAgIHRocm93IGU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3REQjsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERCIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwiY29ubmVjdCIsInRoZW4iLCJlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Brand.js":
/*!*****************************!*\
  !*** ./src/models/Brand.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst BrandSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: [\n            true,\n            'Please provide a brand name'\n        ],\n        unique: true,\n        trim: true\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Brand || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Brand', BrandSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0JyYW5kLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUFjLElBQUlELHdEQUFlLENBQUM7SUFDdENHLE1BQU07UUFDSkMsTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBOEI7UUFDL0NDLFFBQVE7UUFDUkMsTUFBTTtJQUNSO0FBQ0YsR0FBRztJQUNEQyxZQUFZO0FBQ2Q7QUFFQSxpRUFBZVQsd0RBQWUsQ0FBQ1csS0FBSyxJQUFJWCxxREFBYyxDQUFDLFNBQVNDLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERvd25sb2Fkc1xcZ2l0aHViXFxwaG9uZS1zdG9yZVxcc3JjXFxtb2RlbHNcXEJyYW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCBCcmFuZFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIG5hbWU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBwcm92aWRlIGEgYnJhbmQgbmFtZSddLFxyXG4gICAgdW5pcXVlOiB0cnVlLFxyXG4gICAgdHJpbTogdHJ1ZVxyXG4gIH1cclxufSwge1xyXG4gIHRpbWVzdGFtcHM6IHRydWVcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQnJhbmQgfHwgbW9uZ29vc2UubW9kZWwoJ0JyYW5kJywgQnJhbmRTY2hlbWEpOyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIkJyYW5kU2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInRyaW0iLCJ0aW1lc3RhbXBzIiwibW9kZWxzIiwiQnJhbmQiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Brand.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Category.js":
/*!********************************!*\
  !*** ./src/models/Category.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CategorySchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: [\n            true,\n            'Please provide a category name'\n        ],\n        unique: true,\n        trim: true\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Category || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Category', CategorySchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0NhdGVnb3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxpQkFBaUIsSUFBSUQsd0RBQWUsQ0FBQztJQUN6Q0csTUFBTTtRQUNKQyxNQUFNQztRQUNOQyxVQUFVO1lBQUM7WUFBTTtTQUFpQztRQUNsREMsUUFBUTtRQUNSQyxNQUFNO0lBQ1I7QUFDRixHQUFHO0lBQ0RDLFlBQVk7QUFDZDtBQUVBLGlFQUFlVCx3REFBZSxDQUFDVyxRQUFRLElBQUlYLHFEQUFjLENBQUMsWUFBWUMsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRG93bmxvYWRzXFxnaXRodWJcXHBob25lLXN0b3JlXFxzcmNcXG1vZGVsc1xcQ2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IENhdGVnb3J5U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgbmFtZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIHByb3ZpZGUgYSBjYXRlZ29yeSBuYW1lJ10sXHJcbiAgICB1bmlxdWU6IHRydWUsXHJcbiAgICB0cmltOiB0cnVlXHJcbiAgfVxyXG59LCB7XHJcbiAgdGltZXN0YW1wczogdHJ1ZVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5DYXRlZ29yeSB8fCBtb25nb29zZS5tb2RlbCgnQ2F0ZWdvcnknLCBDYXRlZ29yeVNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQ2F0ZWdvcnlTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwidHJpbSIsInRpbWVzdGFtcHMiLCJtb2RlbHMiLCJDYXRlZ29yeSIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Category.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Counter.js":
/*!*******************************!*\
  !*** ./src/models/Counter.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CounterSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    model: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    seq: {\n        type: Number,\n        default: 0\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Counter || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Counter\", CounterSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0NvdW50ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGdCQUFnQixJQUFJRCx3REFBZSxDQUFDO0lBQ3RDRyxPQUFPO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ3BEQyxLQUFLO1FBQUVKLE1BQU1LO1FBQVFDLFNBQVM7SUFBRTtBQUNwQztBQUVBLGlFQUFlVix3REFBZSxDQUFDWSxPQUFPLElBQUlaLHFEQUFjLENBQUMsV0FBV0MsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRG93bmxvYWRzXFxnaXRodWJcXHBob25lLXN0b3JlXFxzcmNcXG1vZGVsc1xcQ291bnRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5jb25zdCBDb3VudGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICBtb2RlbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcclxuICAgIHNlcTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQ291bnRlciB8fCBtb25nb29zZS5tb2RlbChcIkNvdW50ZXJcIiwgQ291bnRlclNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIkNvdW50ZXJTY2hlbWEiLCJTY2hlbWEiLCJtb2RlbCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInNlcSIsIk51bWJlciIsImRlZmF1bHQiLCJtb2RlbHMiLCJDb3VudGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Counter.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Order.js":
/*!*****************************!*\
  !*** ./src/models/Order.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Counter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Counter.js */ \"(rsc)/./src/models/Counter.js\");\n\n\nconst OrderSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    _id: {\n        type: Number\n    },\n    customer: {\n        type: Number,\n        ref: 'Customer',\n        required: [\n            true,\n            'Please provide customer'\n        ]\n    },\n    discount: {\n        amount: {\n            type: Number,\n            default: 0\n        },\n        value: {\n            type: Number,\n            default: 0\n        },\n        type: {\n            type: String,\n            enum: [\n                'percentage',\n                'fixed'\n            ],\n            default: 'percentage'\n        }\n    },\n    items: [\n        {\n            product: {\n                type: Number,\n                ref: 'Product',\n                required: true\n            },\n            quantity: {\n                type: Number,\n                required: true,\n                min: 1\n            },\n            price: {\n                type: Number,\n                required: true\n            }\n        }\n    ],\n    total: {\n        type: Number,\n        required: [\n            true,\n            'Please provide total'\n        ],\n        min: 0\n    },\n    shipping: {\n        type: Number,\n        default: 0,\n        min: 0\n    },\n    subtotal: {\n        type: Number,\n        required: [\n            true,\n            'Please provide subtotal'\n        ],\n        min: 0\n    },\n    status: {\n        type: String,\n        enum: [\n            'pending',\n            'completed',\n            'cancelled'\n        ],\n        default: 'pending'\n    }\n}, {\n    timestamps: true\n});\n//  Auto-increment ID before saving\nOrderSchema.pre(\"save\", async function(next) {\n    if (this.isNew) {\n        const counter = await _Counter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOneAndUpdate({\n            model: \"Order\"\n        }, {\n            $inc: {\n                seq: 1\n            }\n        }, {\n            new: true,\n            upsert: true\n        });\n        this._id = counter.seq;\n    }\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Order || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Order', OrderSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL09yZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFDRztBQUVuQyxNQUFNRSxjQUFjLElBQUlGLHdEQUFlLENBQUM7SUFDdENJLEtBQUs7UUFBRUMsTUFBTUM7SUFBTztJQUNwQkMsVUFBVTtRQUNSRixNQUFNQztRQUNORSxLQUFLO1FBQ0xDLFVBQVU7WUFBQztZQUFNO1NBQTBCO0lBQzdDO0lBQ0FDLFVBQVU7UUFDUkMsUUFBUTtZQUNOTixNQUFNQztZQUNOTSxTQUFTO1FBQ1g7UUFDQUMsT0FBTztZQUNMUixNQUFNQztZQUNOTSxTQUFTO1FBQ1g7UUFDQVAsTUFBTTtZQUNKQSxNQUFNUztZQUNOQyxNQUFNO2dCQUFDO2dCQUFjO2FBQVE7WUFDN0JILFNBQVM7UUFDWDtJQUNGO0lBQ0FJLE9BQU87UUFBQztZQUNOQyxTQUFTO2dCQUNQWixNQUFNQztnQkFDTkUsS0FBSztnQkFDTEMsVUFBVTtZQUNaO1lBQ0FTLFVBQVU7Z0JBQ1JiLE1BQU1DO2dCQUNORyxVQUFVO2dCQUNWVSxLQUFLO1lBQ1A7WUFDQUMsT0FBTztnQkFDTGYsTUFBTUM7Z0JBQ05HLFVBQVU7WUFDWjtRQUNGO0tBQUU7SUFDRlksT0FBTztRQUNMaEIsTUFBTUM7UUFDTkcsVUFBVTtZQUFDO1lBQU07U0FBdUI7UUFDeENVLEtBQUs7SUFDUDtJQUNBRyxVQUFVO1FBQ1JqQixNQUFNQztRQUNOTSxTQUFTO1FBQ1RPLEtBQUs7SUFDUDtJQUNBSSxVQUFVO1FBQ1JsQixNQUFNQztRQUNORyxVQUFVO1lBQUM7WUFBTTtTQUEwQjtRQUMzQ1UsS0FBSztJQUNQO0lBQ0FLLFFBQVE7UUFDTm5CLE1BQU1TO1FBQ05DLE1BQU07WUFBQztZQUFXO1lBQWE7U0FBWTtRQUMzQ0gsU0FBUztJQUNYO0FBQ0YsR0FBRztJQUNEYSxZQUFZO0FBQ2Q7QUFDQSxxQ0FBcUM7QUFDckN2QixZQUFZd0IsR0FBRyxDQUFDLFFBQVEsZUFBZ0JDLElBQUk7SUFDMUMsSUFBSSxJQUFJLENBQUNDLEtBQUssRUFBRTtRQUNkLE1BQU1DLFVBQVUsTUFBTTVCLG1EQUFPQSxDQUFDNkIsZ0JBQWdCLENBQzVDO1lBQUVDLE9BQU87UUFBUSxHQUNqQjtZQUFFQyxNQUFNO2dCQUFFQyxLQUFLO1lBQUU7UUFBRSxHQUNuQjtZQUFFQyxLQUFLO1lBQU1DLFFBQVE7UUFBSztRQUU1QixJQUFJLENBQUMvQixHQUFHLEdBQUd5QixRQUFRSSxHQUFHO0lBQ3hCO0lBQ0FOO0FBQ0Y7QUFFQSxpRUFBZTNCLHdEQUFlLENBQUNxQyxLQUFLLElBQUlyQyxxREFBYyxDQUFDLFNBQVNFLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERvd25sb2Fkc1xcZ2l0aHViXFxwaG9uZS1zdG9yZVxcc3JjXFxtb2RlbHNcXE9yZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmltcG9ydCBDb3VudGVyIGZyb20gXCIuL0NvdW50ZXIuanNcIjtcclxuXHJcbmNvbnN0IE9yZGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgX2lkOiB7IHR5cGU6IE51bWJlciB9LCAvLyBBdXRvLWluY3JlbWVudGVkIG51bWVyaWMgSURcclxuICBjdXN0b21lcjoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgcmVmOiAnQ3VzdG9tZXInLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIHByb3ZpZGUgY3VzdG9tZXInXVxyXG4gIH0sXHJcbiAgZGlzY291bnQ6IHtcclxuICAgIGFtb3VudDoge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIGRlZmF1bHQ6IDBcclxuICAgIH0sXHJcbiAgICB2YWx1ZToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIGRlZmF1bHQ6IDBcclxuICAgIH0sXHJcbiAgICB0eXBlOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgZW51bTogWydwZXJjZW50YWdlJywgJ2ZpeGVkJ10sXHJcbiAgICAgIGRlZmF1bHQ6ICdwZXJjZW50YWdlJ1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaXRlbXM6IFt7XHJcbiAgICBwcm9kdWN0OiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgcXVhbnRpdHk6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgbWluOiAxXHJcbiAgICB9LFxyXG4gICAgcHJpY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfVxyXG4gIH1dLFxyXG4gIHRvdGFsOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgcHJvdmlkZSB0b3RhbCddLFxyXG4gICAgbWluOiAwXHJcbiAgfSxcclxuICBzaGlwcGluZzoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgZGVmYXVsdDogMCxcclxuICAgIG1pbjogMFxyXG4gIH0sXHJcbiAgc3VidG90YWw6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBwcm92aWRlIHN1YnRvdGFsJ10sXHJcbiAgICBtaW46IDBcclxuICB9LFxyXG4gIHN0YXR1czoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZW51bTogWydwZW5kaW5nJywgJ2NvbXBsZXRlZCcsICdjYW5jZWxsZWQnXSxcclxuICAgIGRlZmF1bHQ6ICdwZW5kaW5nJ1xyXG4gIH1cclxufSwge1xyXG4gIHRpbWVzdGFtcHM6IHRydWVcclxufSk7XHJcbi8vIPCflKIgQXV0by1pbmNyZW1lbnQgSUQgYmVmb3JlIHNhdmluZ1xyXG5PcmRlclNjaGVtYS5wcmUoXCJzYXZlXCIsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKHRoaXMuaXNOZXcpIHtcclxuICAgIGNvbnN0IGNvdW50ZXIgPSBhd2FpdCBDb3VudGVyLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgbW9kZWw6IFwiT3JkZXJcIiB9LFxyXG4gICAgICB7ICRpbmM6IHsgc2VxOiAxIH0gfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHVwc2VydDogdHJ1ZSB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5faWQgPSBjb3VudGVyLnNlcTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5PcmRlciB8fCBtb25nb29zZS5tb2RlbCgnT3JkZXInLCBPcmRlclNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQ291bnRlciIsIk9yZGVyU2NoZW1hIiwiU2NoZW1hIiwiX2lkIiwidHlwZSIsIk51bWJlciIsImN1c3RvbWVyIiwicmVmIiwicmVxdWlyZWQiLCJkaXNjb3VudCIsImFtb3VudCIsImRlZmF1bHQiLCJ2YWx1ZSIsIlN0cmluZyIsImVudW0iLCJpdGVtcyIsInByb2R1Y3QiLCJxdWFudGl0eSIsIm1pbiIsInByaWNlIiwidG90YWwiLCJzaGlwcGluZyIsInN1YnRvdGFsIiwic3RhdHVzIiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNvdW50ZXIiLCJmaW5kT25lQW5kVXBkYXRlIiwibW9kZWwiLCIkaW5jIiwic2VxIiwibmV3IiwidXBzZXJ0IiwibW9kZWxzIiwiT3JkZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Order.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Product.js":
/*!*******************************!*\
  !*** ./src/models/Product.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Counter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Counter.js */ \"(rsc)/./src/models/Counter.js\");\n\n\nconst ProductSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    _id: {\n        type: Number\n    },\n    name: {\n        type: String,\n        required: [\n            true,\n            \"Please provide product name\"\n        ],\n        trim: true\n    },\n    color: {\n        type: String,\n        required: [\n            true,\n            \"Please provide color\"\n        ],\n        trim: true\n    },\n    regularPrice: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide regular price\"\n        ],\n        min: 0\n    },\n    salePrice: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide sale price\"\n        ],\n        min: 0\n    },\n    wholesalePrice: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide wholesale price\"\n        ],\n        min: 0\n    },\n    brand: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"Brand\",\n        required: [\n            true,\n            \"Please provide brand\"\n        ]\n    },\n    category: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"Category\",\n        required: [\n            true,\n            \"Please provide category\"\n        ]\n    },\n    stock: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide stock quantity\"\n        ],\n        min: 0,\n        default: 0\n    }\n}, {\n    timestamps: true,\n    _id: false\n} // important: disable default ObjectId\n);\n//  Auto-increment ID before saving\nProductSchema.pre(\"save\", async function(next) {\n    if (this.isNew) {\n        const counter = await _Counter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOneAndUpdate({\n            model: \"Product\"\n        }, {\n            $inc: {\n                seq: 1\n            }\n        }, {\n            new: true,\n            upsert: true\n        });\n        this._id = counter.seq;\n    }\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Product || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Product\", ProductSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1Byb2R1Y3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNHO0FBRW5DLE1BQU1FLGdCQUFnQixJQUFJRix3REFBZSxDQUN2QztJQUNFSSxLQUFLO1FBQUVDLE1BQU1DO0lBQU87SUFDcEJDLE1BQU07UUFDSkYsTUFBTUc7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBOEI7UUFDL0NDLE1BQU07SUFDUjtJQUNBQyxPQUFPO1FBQ0xOLE1BQU1HO1FBQ05DLFVBQVU7WUFBQztZQUFNO1NBQXVCO1FBQ3hDQyxNQUFNO0lBQ1I7SUFDQUUsY0FBYztRQUNaUCxNQUFNQztRQUNORyxVQUFVO1lBQUM7WUFBTTtTQUErQjtRQUNoREksS0FBSztJQUNQO0lBQ0FDLFdBQVc7UUFDVFQsTUFBTUM7UUFDTkcsVUFBVTtZQUFDO1lBQU07U0FBNEI7UUFDN0NJLEtBQUs7SUFDUDtJQUNBRSxnQkFBZ0I7UUFDZFYsTUFBTUM7UUFDTkcsVUFBVTtZQUFDO1lBQU07U0FBaUM7UUFDbERJLEtBQUs7SUFDUDtJQUNBRyxPQUFPO1FBQ0xYLE1BQU1MLHdEQUFlLENBQUNpQixLQUFLLENBQUNDLFFBQVE7UUFDcENDLEtBQUs7UUFDTFYsVUFBVTtZQUFDO1lBQU07U0FBdUI7SUFDMUM7SUFDQVcsVUFBVTtRQUNSZixNQUFNTCx3REFBZSxDQUFDaUIsS0FBSyxDQUFDQyxRQUFRO1FBQ3BDQyxLQUFLO1FBQ0xWLFVBQVU7WUFBQztZQUFNO1NBQTBCO0lBQzdDO0lBQ0FZLE9BQU87UUFDTGhCLE1BQU1DO1FBQ05HLFVBQVU7WUFBQztZQUFNO1NBQWdDO1FBQ2pESSxLQUFLO1FBQ0xTLFNBQVM7SUFDWDtBQUNGLEdBQ0E7SUFBRUMsWUFBWTtJQUFNbkIsS0FBSztBQUFNLEVBQUUsc0NBQXNDOztBQUd6RSxxQ0FBcUM7QUFDckNGLGNBQWNzQixHQUFHLENBQUMsUUFBUSxlQUFnQkMsSUFBSTtJQUM1QyxJQUFJLElBQUksQ0FBQ0MsS0FBSyxFQUFFO1FBQ2QsTUFBTUMsVUFBVSxNQUFNMUIsbURBQU9BLENBQUMyQixnQkFBZ0IsQ0FDNUM7WUFBRUMsT0FBTztRQUFVLEdBQ25CO1lBQUVDLE1BQU07Z0JBQUVDLEtBQUs7WUFBRTtRQUFFLEdBQ25CO1lBQUVDLEtBQUs7WUFBTUMsUUFBUTtRQUFLO1FBRTVCLElBQUksQ0FBQzdCLEdBQUcsR0FBR3VCLFFBQVFJLEdBQUc7SUFDeEI7SUFDQU47QUFDRjtBQUVBLGlFQUFlekIsd0RBQWUsQ0FBQ21DLE9BQU8sSUFBSW5DLHFEQUFjLENBQUMsV0FBV0UsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRG93bmxvYWRzXFxnaXRodWJcXHBob25lLXN0b3JlXFxzcmNcXG1vZGVsc1xcUHJvZHVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcbmltcG9ydCBDb3VudGVyIGZyb20gXCIuL0NvdW50ZXIuanNcIjtcclxuXHJcbmNvbnN0IFByb2R1Y3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIF9pZDogeyB0eXBlOiBOdW1iZXIgfSwgLy8gQXV0by1pbmNyZW1lbnRlZCBudW1lcmljIElEXHJcbiAgICBuYW1lOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCBcIlBsZWFzZSBwcm92aWRlIHByb2R1Y3QgbmFtZVwiXSxcclxuICAgICAgdHJpbTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBjb2xvcjoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBjb2xvclwiXSxcclxuICAgICAgdHJpbTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICByZWd1bGFyUHJpY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogW3RydWUsIFwiUGxlYXNlIHByb3ZpZGUgcmVndWxhciBwcmljZVwiXSxcclxuICAgICAgbWluOiAwLFxyXG4gICAgfSxcclxuICAgIHNhbGVQcmljZToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBzYWxlIHByaWNlXCJdLFxyXG4gICAgICBtaW46IDAsXHJcbiAgICB9LFxyXG4gICAgd2hvbGVzYWxlUHJpY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogW3RydWUsIFwiUGxlYXNlIHByb3ZpZGUgd2hvbGVzYWxlIHByaWNlXCJdLFxyXG4gICAgICBtaW46IDAsXHJcbiAgICB9LFxyXG4gICAgYnJhbmQ6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6IFwiQnJhbmRcIixcclxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCBcIlBsZWFzZSBwcm92aWRlIGJyYW5kXCJdLFxyXG4gICAgfSxcclxuICAgIGNhdGVnb3J5OiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiBcIkNhdGVnb3J5XCIsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBjYXRlZ29yeVwiXSxcclxuICAgIH0sXHJcbiAgICBzdG9jazoge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBzdG9jayBxdWFudGl0eVwiXSxcclxuICAgICAgbWluOiAwLFxyXG4gICAgICBkZWZhdWx0OiAwLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHsgdGltZXN0YW1wczogdHJ1ZSwgX2lkOiBmYWxzZSB9IC8vIGltcG9ydGFudDogZGlzYWJsZSBkZWZhdWx0IE9iamVjdElkXHJcbik7XHJcblxyXG4vLyDwn5SiIEF1dG8taW5jcmVtZW50IElEIGJlZm9yZSBzYXZpbmdcclxuUHJvZHVjdFNjaGVtYS5wcmUoXCJzYXZlXCIsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKHRoaXMuaXNOZXcpIHtcclxuICAgIGNvbnN0IGNvdW50ZXIgPSBhd2FpdCBDb3VudGVyLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgbW9kZWw6IFwiUHJvZHVjdFwiIH0sXHJcbiAgICAgIHsgJGluYzogeyBzZXE6IDEgfSB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSwgdXBzZXJ0OiB0cnVlIH1cclxuICAgICk7XHJcbiAgICB0aGlzLl9pZCA9IGNvdW50ZXIuc2VxO1xyXG4gIH1cclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLlByb2R1Y3QgfHwgbW9uZ29vc2UubW9kZWwoXCJQcm9kdWN0XCIsIFByb2R1Y3RTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJDb3VudGVyIiwiUHJvZHVjdFNjaGVtYSIsIlNjaGVtYSIsIl9pZCIsInR5cGUiLCJOdW1iZXIiLCJuYW1lIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ0cmltIiwiY29sb3IiLCJyZWd1bGFyUHJpY2UiLCJtaW4iLCJzYWxlUHJpY2UiLCJ3aG9sZXNhbGVQcmljZSIsImJyYW5kIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImNhdGVnb3J5Iiwic3RvY2siLCJkZWZhdWx0IiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNvdW50ZXIiLCJmaW5kT25lQW5kVXBkYXRlIiwibW9kZWwiLCIkaW5jIiwic2VxIiwibmV3IiwidXBzZXJ0IiwibW9kZWxzIiwiUHJvZHVjdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Product.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freports%2Froute&page=%2Fapi%2Freports%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();