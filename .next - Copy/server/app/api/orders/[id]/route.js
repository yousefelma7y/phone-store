/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/[id]/route";
exports.ids = ["app/api/orders/[id]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pc_Downloads_github_phone_store_src_app_api_orders_id_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/orders/[id]/route.js */ \"(rsc)/./src/app/api/orders/[id]/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/[id]/route\",\n        pathname: \"/api/orders/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/[id]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pc\\\\Downloads\\\\github\\\\phone-store\\\\src\\\\app\\\\api\\\\orders\\\\[id]\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_pc_Downloads_github_phone_store_src_app_api_orders_id_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkYlNUJpZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGb3JkZXJzJTJGJTVCaWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZvcmRlcnMlMkYlNUJpZCU1RCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q2dpdGh1YiU1Q3Bob25lLXN0b3JlJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q2dpdGh1YiU1Q3Bob25lLXN0b3JlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNvQztBQUNqSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxccGNcXFxcRG93bmxvYWRzXFxcXGdpdGh1YlxcXFxwaG9uZS1zdG9yZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxvcmRlcnNcXFxcW2lkXVxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JkZXJzL1tpZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vcmRlcnMvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JkZXJzL1tpZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxwY1xcXFxEb3dubG9hZHNcXFxcZ2l0aHViXFxcXHBob25lLXN0b3JlXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG9yZGVyc1xcXFxbaWRdXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/orders/[id]/route.js":
/*!******************************************!*\
  !*** ./src/app/api/orders/[id]/route.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/mongodb */ \"(rsc)/./src/lib/mongodb.js\");\n/* harmony import */ var _models_Order__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../models/Order */ \"(rsc)/./src/models/Order.js\");\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../models/Product */ \"(rsc)/./src/models/Product.js\");\n/* harmony import */ var _models_Customer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../models/Customer */ \"(rsc)/./src/models/Customer.js\");\n// import type { NextApiRequest, NextApiResponse } from \"next\";\n\n\n\n\n\n// Helper function to calculate order totals\nconst calculateOrderTotals = (items, discount, shipping)=>{\n    const subtotal = items.reduce((sum, item)=>sum + item.price * item.quantity, 0);\n    let discountAmount = 0;\n    if (discount) {\n        if (discount.type === 'percentage') {\n            discountAmount = subtotal * discount.value / 100;\n        } else if (discount.type === 'fixed') {\n            discountAmount = discount.value;\n        }\n    }\n    const total = subtotal - discountAmount + (shipping || 0);\n    return {\n        subtotal,\n        discountAmount,\n        total: Math.max(0, total)\n    };\n};\n// GET - Get single order by ID\nasync function GET(request, { params }) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { id } = params;\n        const order = await _models_Order__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(id).populate('customer').populate('items.product');\n        if (!order) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'Order not found'\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: order\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        if (error.kind === 'ObjectId') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'Order not found'\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: 'Error fetching order',\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT - Update order\nasync function PUT(request, { params }) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { id } = params;\n        const body = await request.json();\n        const { customer, items, discount, shipping, status } = body;\n        // Check if order exists\n        let order = await _models_Order__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(id).populate('items.product');\n        if (!order) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'Order not found'\n            }, {\n                status: 404\n            });\n        }\n        // If order is being cancelled, return all stock\n        if (status === 'cancelled' && order.status !== 'cancelled') {\n            for (const item of order.items){\n                const productId = item.product._id ? item.product._id : item.product;\n                await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndUpdate(productId, {\n                    $inc: {\n                        stock: item.quantity\n                    }\n                });\n            }\n        }\n        // If order is being un-cancelled (changed from cancelled to another status), deduct stock again\n        if (order.status === 'cancelled' && status && status !== 'cancelled') {\n            for (const item of order.items){\n                const productId = item.product._id ? item.product._id : item.product;\n                const product = await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(productId);\n                if (!product) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        message: `Product not found: ${productId}`\n                    }, {\n                        status: 404\n                    });\n                }\n                if (product.stock < item.quantity) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        message: `Insufficient stock for product: ${product.name}. Available: ${product.stock}, Required: ${item.quantity}`\n                    }, {\n                        status: 400\n                    });\n                }\n                await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndUpdate(productId, {\n                    $inc: {\n                        stock: -item.quantity\n                    }\n                });\n            }\n        }\n        // If customer is being updated, validate it exists\n        if (customer && customer !== order.customer.toString()) {\n            const customerExists = await _models_Customer__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findById(customer);\n            if (!customerExists) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: 'Customer not found'\n                }, {\n                    status: 404\n                });\n            }\n        }\n        // If items are being updated (and order is not cancelled), handle stock changes\n        let validatedItems = order.items;\n        if (items && status !== 'cancelled') {\n            // Create a map of old items for comparison\n            const oldItemsMap = new Map();\n            order.items.forEach((item)=>{\n                const productId = item.product._id ? item.product._id.toString() : item.product.toString();\n                oldItemsMap.set(productId, item.quantity);\n            });\n            // Create a map of new items\n            const newItemsMap = new Map();\n            items.forEach((item)=>{\n                const productId = (item.product || item._id).toString();\n                newItemsMap.set(productId, item.quantity);\n            });\n            validatedItems = [];\n            // Process new/updated items\n            for (const item of items){\n                const productId = (item.product || item._id).toString();\n                const product = await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(productId);\n                if (!product) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        message: `Product not found: ${productId}`\n                    }, {\n                        status: 404\n                    });\n                }\n                const oldQuantity = oldItemsMap.get(productId) || 0;\n                const newQuantity = item.quantity;\n                const quantityDiff = newQuantity - oldQuantity;\n                // If quantity increased, check stock availability\n                if (quantityDiff > 0) {\n                    if (product.stock < quantityDiff) {\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: false,\n                            message: `Insufficient stock for product: ${product.name}. Available: ${product.stock}, Requested: ${quantityDiff}`\n                        }, {\n                            status: 400\n                        });\n                    }\n                    // Deduct additional stock\n                    await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndUpdate(productId, {\n                        $inc: {\n                            stock: -quantityDiff\n                        }\n                    });\n                } else if (quantityDiff < 0) {\n                    // If quantity decreased, return stock\n                    await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndUpdate(productId, {\n                        $inc: {\n                            stock: Math.abs(quantityDiff)\n                        }\n                    });\n                }\n                validatedItems.push({\n                    product: productId,\n                    quantity: newQuantity,\n                    price: item.price\n                });\n            }\n            // Handle removed items - return their stock\n            for (const [productId, quantity] of oldItemsMap){\n                if (!newItemsMap.has(productId)) {\n                    // Item was removed, return its stock\n                    await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndUpdate(productId, {\n                        $inc: {\n                            stock: quantity\n                        }\n                    });\n                }\n            }\n        }\n        // Calculate new totals\n        const { subtotal, discountAmount, total } = calculateOrderTotals(validatedItems, discount || order.discount, shipping !== undefined ? shipping : order.shipping);\n        // Update order\n        const updateData = {\n            subtotal,\n            total,\n            discount: discount ? {\n                amount: discountAmount,\n                value: discount.value,\n                type: discount.type\n            } : order.discount\n        };\n        if (customer) updateData.customer = customer;\n        if (items) updateData.items = validatedItems;\n        if (shipping !== undefined) updateData.shipping = shipping;\n        if (status) updateData.status = status;\n        order = await _models_Order__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndUpdate(id, updateData, {\n            new: true,\n            runValidators: true\n        }).populate('customer').populate('items.product');\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: order\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error('PUT Error:', error);\n        if (error.kind === 'ObjectId') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'Order not found'\n            }, {\n                status: 404\n            });\n        }\n        if (error.name === 'ValidationError') {\n            const messages = Object.values(error.errors).map((err)=>err.message);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'Validation error',\n                errors: messages\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: 'Error updating order',\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE - Delete order\nasync function DELETE(request, { params }) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { id } = params;\n        const order = await _models_Order__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(id).populate('items.product');\n        if (!order) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'Order not found'\n            }, {\n                status: 404\n            });\n        }\n        // Return stock for all items in the order (only if order is not already cancelled)\n        if (order.status !== 'cancelled') {\n            for (const item of order.items){\n                const productId = item.product._id ? item.product._id : item.product;\n                await _models_Product__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndUpdate(productId, {\n                    $inc: {\n                        stock: item.quantity\n                    }\n                });\n            }\n        }\n        // Delete the order\n        await _models_Order__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByIdAndDelete(id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: 'Order deleted successfully and stock returned',\n            data: {}\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error('DELETE Error:', error);\n        if (error.kind === 'ObjectId') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: 'Order not found'\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: 'Error deleting order',\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLMkIsT0FBTyxDQUFDQyxHQUFHLEdBQUc1QixLQUFLMkIsT0FBTztnQkFDcEUsTUFBTXBDLHVEQUFPQSxDQUFDc0MsaUJBQWlCLENBQzdCSCxXQUNBO29CQUFFSSxNQUFNO3dCQUFFQyxPQUFPL0IsS0FBS0UsUUFBUTtvQkFBQztnQkFBRTtZQUVyQztRQUNGO1FBRUEsbUJBQW1CO1FBQ25CLE1BQU1aLHFEQUFLQSxDQUFDdUUsaUJBQWlCLENBQUNqRDtRQUU5QixPQUFPeEIscURBQVlBLENBQUM0QixJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEMsU0FBUztZQUNURSxNQUFNLENBQUM7UUFDVCxHQUFHO1lBQUVELFFBQVE7UUFBSTtJQUVuQixFQUFFLE9BQU9FLE9BQU87UUFDZGdDLFFBQVFoQyxLQUFLLENBQUMsaUJBQWlCQTtRQUUvQixJQUFJQSxNQUFNQyxJQUFJLEtBQUssWUFBWTtZQUM3QixPQUFPbEMscURBQVlBLENBQUM0QixJQUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUQyxTQUFTO1lBQ1gsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ25CO1FBRUEsT0FBTy9CLHFEQUFZQSxDQUFDNEIsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RDLFNBQVM7WUFDVEcsT0FBT0EsTUFBTUgsT0FBTztRQUN0QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEb3dubG9hZHNcXGdpdGh1YlxccGhvbmUtc3RvcmVcXHNyY1xcYXBwXFxhcGlcXG9yZGVyc1xcW2lkXVxccm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcclxuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5cclxuaW1wb3J0IGNvbm5lY3REQiBmcm9tIFwiLi4vLi4vLi4vLi4vbGliL21vbmdvZGJcIjtcclxuaW1wb3J0IE9yZGVyIGZyb20gXCIuLi8uLi8uLi8uLi9tb2RlbHMvT3JkZXJcIjtcclxuaW1wb3J0IFByb2R1Y3QgZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9Qcm9kdWN0XCI7XHJcbmltcG9ydCBDdXN0b21lciBmcm9tIFwiLi4vLi4vLi4vLi4vbW9kZWxzL0N1c3RvbWVyXCI7XHJcblxyXG5cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjYWxjdWxhdGUgb3JkZXIgdG90YWxzXHJcbmNvbnN0IGNhbGN1bGF0ZU9yZGVyVG90YWxzID0gKGl0ZW1zLCBkaXNjb3VudCwgc2hpcHBpbmcpID0+IHtcclxuICBjb25zdCBzdWJ0b3RhbCA9IGl0ZW1zLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLCAwKTtcclxuXHJcbiAgbGV0IGRpc2NvdW50QW1vdW50ID0gMDtcclxuICBpZiAoZGlzY291bnQpIHtcclxuICAgIGlmIChkaXNjb3VudC50eXBlID09PSAncGVyY2VudGFnZScpIHtcclxuICAgICAgZGlzY291bnRBbW91bnQgPSAoc3VidG90YWwgKiBkaXNjb3VudC52YWx1ZSkgLyAxMDA7XHJcbiAgICB9IGVsc2UgaWYgKGRpc2NvdW50LnR5cGUgPT09ICdmaXhlZCcpIHtcclxuICAgICAgZGlzY291bnRBbW91bnQgPSBkaXNjb3VudC52YWx1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IHRvdGFsID0gc3VidG90YWwgLSBkaXNjb3VudEFtb3VudCArIChzaGlwcGluZyB8fCAwKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHN1YnRvdGFsLFxyXG4gICAgZGlzY291bnRBbW91bnQsXHJcbiAgICB0b3RhbDogTWF0aC5tYXgoMCwgdG90YWwpXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEdFVCAtIEdldCBzaW5nbGUgb3JkZXIgYnkgSURcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0LCB7IHBhcmFtcyB9KSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3REQigpO1xyXG5cclxuICAgIGNvbnN0IHsgaWQgfSA9IHBhcmFtcztcclxuXHJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKGlkKVxyXG4gICAgICAucG9wdWxhdGUoJ2N1c3RvbWVyJylcclxuICAgICAgLnBvcHVsYXRlKCdpdGVtcy5wcm9kdWN0Jyk7XHJcblxyXG4gICAgaWYgKCFvcmRlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdPcmRlciBub3QgZm91bmQnXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YTogb3JkZXJcclxuICAgIH0sIHsgc3RhdHVzOiAyMDAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBpZiAoZXJyb3Iua2luZCA9PT0gJ09iamVjdElkJykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdPcmRlciBub3QgZm91bmQnXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBmZXRjaGluZyBvcmRlcicsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUFVUIC0gVXBkYXRlIG9yZGVyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdCwgeyBwYXJhbXMgfSkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcclxuXHJcbiAgICBjb25zdCB7IGlkIH0gPSBwYXJhbXM7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB7IGN1c3RvbWVyLCBpdGVtcywgZGlzY291bnQsIHNoaXBwaW5nLCBzdGF0dXMgfSA9IGJvZHk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgb3JkZXIgZXhpc3RzXHJcbiAgICBsZXQgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChpZCkucG9wdWxhdGUoJ2l0ZW1zLnByb2R1Y3QnKTtcclxuICAgIGlmICghb3JkZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnT3JkZXIgbm90IGZvdW5kJ1xyXG4gICAgICB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIG9yZGVyIGlzIGJlaW5nIGNhbmNlbGxlZCwgcmV0dXJuIGFsbCBzdG9ja1xyXG4gICAgaWYgKHN0YXR1cyA9PT0gJ2NhbmNlbGxlZCcgJiYgb3JkZXIuc3RhdHVzICE9PSAnY2FuY2VsbGVkJykge1xyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb3JkZXIuaXRlbXMpIHtcclxuICAgICAgICBjb25zdCBwcm9kdWN0SWQgPSBpdGVtLnByb2R1Y3QuX2lkID8gaXRlbS5wcm9kdWN0Ll9pZCA6IGl0ZW0ucHJvZHVjdDtcclxuICAgICAgICBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgICAgICAgcHJvZHVjdElkLFxyXG4gICAgICAgICAgeyAkaW5jOiB7IHN0b2NrOiBpdGVtLnF1YW50aXR5IH0gfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBvcmRlciBpcyBiZWluZyB1bi1jYW5jZWxsZWQgKGNoYW5nZWQgZnJvbSBjYW5jZWxsZWQgdG8gYW5vdGhlciBzdGF0dXMpLCBkZWR1Y3Qgc3RvY2sgYWdhaW5cclxuICAgIGlmIChvcmRlci5zdGF0dXMgPT09ICdjYW5jZWxsZWQnICYmIHN0YXR1cyAmJiBzdGF0dXMgIT09ICdjYW5jZWxsZWQnKSB7XHJcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvcmRlci5pdGVtcykge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IGl0ZW0ucHJvZHVjdC5faWQgPyBpdGVtLnByb2R1Y3QuX2lkIDogaXRlbS5wcm9kdWN0O1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHByb2R1Y3RJZCk7XHJcblxyXG4gICAgICAgIGlmICghcHJvZHVjdCkge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBQcm9kdWN0IG5vdCBmb3VuZDogJHtwcm9kdWN0SWR9YFxyXG4gICAgICAgICAgfSwgeyBzdGF0dXM6IDQwNCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwcm9kdWN0LnN0b2NrIDwgaXRlbS5xdWFudGl0eSkge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBJbnN1ZmZpY2llbnQgc3RvY2sgZm9yIHByb2R1Y3Q6ICR7cHJvZHVjdC5uYW1lfS4gQXZhaWxhYmxlOiAke3Byb2R1Y3Quc3RvY2t9LCBSZXF1aXJlZDogJHtpdGVtLnF1YW50aXR5fWBcclxuICAgICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgICAgICAgcHJvZHVjdElkLFxyXG4gICAgICAgICAgeyAkaW5jOiB7IHN0b2NrOiAtaXRlbS5xdWFudGl0eSB9IH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgY3VzdG9tZXIgaXMgYmVpbmcgdXBkYXRlZCwgdmFsaWRhdGUgaXQgZXhpc3RzXHJcbiAgICBpZiAoY3VzdG9tZXIgJiYgY3VzdG9tZXIgIT09IG9yZGVyLmN1c3RvbWVyLnRvU3RyaW5nKCkpIHtcclxuICAgICAgY29uc3QgY3VzdG9tZXJFeGlzdHMgPSBhd2FpdCBDdXN0b21lci5maW5kQnlJZChjdXN0b21lcik7XHJcbiAgICAgIGlmICghY3VzdG9tZXJFeGlzdHMpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnQ3VzdG9tZXIgbm90IGZvdW5kJ1xyXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBpdGVtcyBhcmUgYmVpbmcgdXBkYXRlZCAoYW5kIG9yZGVyIGlzIG5vdCBjYW5jZWxsZWQpLCBoYW5kbGUgc3RvY2sgY2hhbmdlc1xyXG4gICAgbGV0IHZhbGlkYXRlZEl0ZW1zID0gb3JkZXIuaXRlbXM7XHJcbiAgICBpZiAoaXRlbXMgJiYgc3RhdHVzICE9PSAnY2FuY2VsbGVkJykge1xyXG4gICAgICAvLyBDcmVhdGUgYSBtYXAgb2Ygb2xkIGl0ZW1zIGZvciBjb21wYXJpc29uXHJcbiAgICAgIGNvbnN0IG9sZEl0ZW1zTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICBvcmRlci5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IGl0ZW0ucHJvZHVjdC5faWQgPyBpdGVtLnByb2R1Y3QuX2lkLnRvU3RyaW5nKCkgOiBpdGVtLnByb2R1Y3QudG9TdHJpbmcoKTtcclxuICAgICAgICBvbGRJdGVtc01hcC5zZXQocHJvZHVjdElkLCBpdGVtLnF1YW50aXR5KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgYSBtYXAgb2YgbmV3IGl0ZW1zXHJcbiAgICAgIGNvbnN0IG5ld0l0ZW1zTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IChpdGVtLnByb2R1Y3QgfHwgaXRlbS5faWQpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbmV3SXRlbXNNYXAuc2V0KHByb2R1Y3RJZCwgaXRlbS5xdWFudGl0eSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdmFsaWRhdGVkSXRlbXMgPSBbXTtcclxuXHJcbiAgICAgIC8vIFByb2Nlc3MgbmV3L3VwZGF0ZWQgaXRlbXNcclxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdElkID0gKGl0ZW0ucHJvZHVjdCB8fCBpdGVtLl9pZCkudG9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChwcm9kdWN0SWQpO1xyXG5cclxuICAgICAgICBpZiAoIXByb2R1Y3QpIHtcclxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBgUHJvZHVjdCBub3QgZm91bmQ6ICR7cHJvZHVjdElkfWBcclxuICAgICAgICAgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvbGRRdWFudGl0eSA9IG9sZEl0ZW1zTWFwLmdldChwcm9kdWN0SWQpIHx8IDA7XHJcbiAgICAgICAgY29uc3QgbmV3UXVhbnRpdHkgPSBpdGVtLnF1YW50aXR5O1xyXG4gICAgICAgIGNvbnN0IHF1YW50aXR5RGlmZiA9IG5ld1F1YW50aXR5IC0gb2xkUXVhbnRpdHk7XHJcblxyXG4gICAgICAgIC8vIElmIHF1YW50aXR5IGluY3JlYXNlZCwgY2hlY2sgc3RvY2sgYXZhaWxhYmlsaXR5XHJcbiAgICAgICAgaWYgKHF1YW50aXR5RGlmZiA+IDApIHtcclxuICAgICAgICAgIGlmIChwcm9kdWN0LnN0b2NrIDwgcXVhbnRpdHlEaWZmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgbWVzc2FnZTogYEluc3VmZmljaWVudCBzdG9jayBmb3IgcHJvZHVjdDogJHtwcm9kdWN0Lm5hbWV9LiBBdmFpbGFibGU6ICR7cHJvZHVjdC5zdG9ja30sIFJlcXVlc3RlZDogJHtxdWFudGl0eURpZmZ9YFxyXG4gICAgICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gRGVkdWN0IGFkZGl0aW9uYWwgc3RvY2tcclxuICAgICAgICAgIGF3YWl0IFByb2R1Y3QuZmluZEJ5SWRBbmRVcGRhdGUoXHJcbiAgICAgICAgICAgIHByb2R1Y3RJZCxcclxuICAgICAgICAgICAgeyAkaW5jOiB7IHN0b2NrOiAtcXVhbnRpdHlEaWZmIH0gfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHF1YW50aXR5RGlmZiA8IDApIHtcclxuICAgICAgICAgIC8vIElmIHF1YW50aXR5IGRlY3JlYXNlZCwgcmV0dXJuIHN0b2NrXHJcbiAgICAgICAgICBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkQW5kVXBkYXRlKFxyXG4gICAgICAgICAgICBwcm9kdWN0SWQsXHJcbiAgICAgICAgICAgIHsgJGluYzogeyBzdG9jazogTWF0aC5hYnMocXVhbnRpdHlEaWZmKSB9IH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YWxpZGF0ZWRJdGVtcy5wdXNoKHtcclxuICAgICAgICAgIHByb2R1Y3Q6IHByb2R1Y3RJZCxcclxuICAgICAgICAgIHF1YW50aXR5OiBuZXdRdWFudGl0eSxcclxuICAgICAgICAgIHByaWNlOiBpdGVtLnByaWNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhhbmRsZSByZW1vdmVkIGl0ZW1zIC0gcmV0dXJuIHRoZWlyIHN0b2NrXHJcbiAgICAgIGZvciAoY29uc3QgW3Byb2R1Y3RJZCwgcXVhbnRpdHldIG9mIG9sZEl0ZW1zTWFwKSB7XHJcbiAgICAgICAgaWYgKCFuZXdJdGVtc01hcC5oYXMocHJvZHVjdElkKSkge1xyXG4gICAgICAgICAgLy8gSXRlbSB3YXMgcmVtb3ZlZCwgcmV0dXJuIGl0cyBzdG9ja1xyXG4gICAgICAgICAgYXdhaXQgUHJvZHVjdC5maW5kQnlJZEFuZFVwZGF0ZShcclxuICAgICAgICAgICAgcHJvZHVjdElkLFxyXG4gICAgICAgICAgICB7ICRpbmM6IHsgc3RvY2s6IHF1YW50aXR5IH0gfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgbmV3IHRvdGFsc1xyXG4gICAgY29uc3QgeyBzdWJ0b3RhbCwgZGlzY291bnRBbW91bnQsIHRvdGFsIH0gPSBjYWxjdWxhdGVPcmRlclRvdGFscyhcclxuICAgICAgdmFsaWRhdGVkSXRlbXMsXHJcbiAgICAgIGRpc2NvdW50IHx8IG9yZGVyLmRpc2NvdW50LFxyXG4gICAgICBzaGlwcGluZyAhPT0gdW5kZWZpbmVkID8gc2hpcHBpbmcgOiBvcmRlci5zaGlwcGluZ1xyXG4gICAgKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgb3JkZXJcclxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XHJcbiAgICAgIHN1YnRvdGFsLFxyXG4gICAgICB0b3RhbCxcclxuICAgICAgZGlzY291bnQ6IGRpc2NvdW50ID8ge1xyXG4gICAgICAgIGFtb3VudDogZGlzY291bnRBbW91bnQsXHJcbiAgICAgICAgdmFsdWU6IGRpc2NvdW50LnZhbHVlLFxyXG4gICAgICAgIHR5cGU6IGRpc2NvdW50LnR5cGVcclxuICAgICAgfSA6IG9yZGVyLmRpc2NvdW50XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChjdXN0b21lcikgdXBkYXRlRGF0YS5jdXN0b21lciA9IGN1c3RvbWVyO1xyXG4gICAgaWYgKGl0ZW1zKSB1cGRhdGVEYXRhLml0ZW1zID0gdmFsaWRhdGVkSXRlbXM7XHJcbiAgICBpZiAoc2hpcHBpbmcgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zaGlwcGluZyA9IHNoaXBwaW5nO1xyXG4gICAgaWYgKHN0YXR1cykgdXBkYXRlRGF0YS5zdGF0dXMgPSBzdGF0dXM7XHJcblxyXG4gICAgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZEFuZFVwZGF0ZShcclxuICAgICAgaWQsXHJcbiAgICAgIHVwZGF0ZURhdGEsXHJcbiAgICAgIHsgbmV3OiB0cnVlLCBydW5WYWxpZGF0b3JzOiB0cnVlIH1cclxuICAgIClcclxuICAgICAgLnBvcHVsYXRlKCdjdXN0b21lcicpXHJcbiAgICAgIC5wb3B1bGF0ZSgnaXRlbXMucHJvZHVjdCcpO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IG9yZGVyXHJcbiAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUFVUIEVycm9yOicsIGVycm9yKTtcclxuXHJcbiAgICBpZiAoZXJyb3Iua2luZCA9PT0gJ09iamVjdElkJykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdPcmRlciBub3QgZm91bmQnXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gT2JqZWN0LnZhbHVlcyhlcnJvci5lcnJvcnMpLm1hcChlcnIgPT4gZXJyLm1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGVycm9yJyxcclxuICAgICAgICBlcnJvcnM6IG1lc3NhZ2VzXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciB1cGRhdGluZyBvcmRlcicsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gREVMRVRFIC0gRGVsZXRlIG9yZGVyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdCwgeyBwYXJhbXMgfSkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcclxuXHJcbiAgICBjb25zdCB7IGlkIH0gPSBwYXJhbXM7XHJcblxyXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZChpZCkucG9wdWxhdGUoJ2l0ZW1zLnByb2R1Y3QnKTtcclxuXHJcbiAgICBpZiAoIW9yZGVyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ09yZGVyIG5vdCBmb3VuZCdcclxuICAgICAgfSwgeyBzdGF0dXM6IDQwNCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gc3RvY2sgZm9yIGFsbCBpdGVtcyBpbiB0aGUgb3JkZXIgKG9ubHkgaWYgb3JkZXIgaXMgbm90IGFscmVhZHkgY2FuY2VsbGVkKVxyXG4gICAgaWYgKG9yZGVyLnN0YXR1cyAhPT0gJ2NhbmNlbGxlZCcpIHtcclxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9yZGVyLml0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdElkID0gaXRlbS5wcm9kdWN0Ll9pZCA/IGl0ZW0ucHJvZHVjdC5faWQgOiBpdGVtLnByb2R1Y3Q7XHJcbiAgICAgICAgYXdhaXQgUHJvZHVjdC5maW5kQnlJZEFuZFVwZGF0ZShcclxuICAgICAgICAgIHByb2R1Y3RJZCxcclxuICAgICAgICAgIHsgJGluYzogeyBzdG9jazogaXRlbS5xdWFudGl0eSB9IH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVsZXRlIHRoZSBvcmRlclxyXG4gICAgYXdhaXQgT3JkZXIuZmluZEJ5SWRBbmREZWxldGUoaWQpO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdPcmRlciBkZWxldGVkIHN1Y2Nlc3NmdWxseSBhbmQgc3RvY2sgcmV0dXJuZWQnLFxyXG4gICAgICBkYXRhOiB7fVxyXG4gICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0RFTEVURSBFcnJvcjonLCBlcnJvcik7XHJcblxyXG4gICAgaWYgKGVycm9yLmtpbmQgPT09ICdPYmplY3RJZCcpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnT3JkZXIgbm90IGZvdW5kJ1xyXG4gICAgICB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBtZXNzYWdlOiAnRXJyb3IgZGVsZXRpbmcgb3JkZXInLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY29ubmVjdERCIiwiT3JkZXIiLCJQcm9kdWN0IiwiQ3VzdG9tZXIiLCJjYWxjdWxhdGVPcmRlclRvdGFscyIsIml0ZW1zIiwiZGlzY291bnQiLCJzaGlwcGluZyIsInN1YnRvdGFsIiwicmVkdWNlIiwic3VtIiwiaXRlbSIsInByaWNlIiwicXVhbnRpdHkiLCJkaXNjb3VudEFtb3VudCIsInR5cGUiLCJ2YWx1ZSIsInRvdGFsIiwiTWF0aCIsIm1heCIsIkdFVCIsInJlcXVlc3QiLCJwYXJhbXMiLCJpZCIsIm9yZGVyIiwiZmluZEJ5SWQiLCJwb3B1bGF0ZSIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsInN0YXR1cyIsImRhdGEiLCJlcnJvciIsImtpbmQiLCJQVVQiLCJib2R5IiwiY3VzdG9tZXIiLCJwcm9kdWN0SWQiLCJwcm9kdWN0IiwiX2lkIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCIkaW5jIiwic3RvY2siLCJuYW1lIiwidG9TdHJpbmciLCJjdXN0b21lckV4aXN0cyIsInZhbGlkYXRlZEl0ZW1zIiwib2xkSXRlbXNNYXAiLCJNYXAiLCJmb3JFYWNoIiwic2V0IiwibmV3SXRlbXNNYXAiLCJvbGRRdWFudGl0eSIsImdldCIsIm5ld1F1YW50aXR5IiwicXVhbnRpdHlEaWZmIiwiYWJzIiwicHVzaCIsImhhcyIsInVuZGVmaW5lZCIsInVwZGF0ZURhdGEiLCJhbW91bnQiLCJuZXciLCJydW5WYWxpZGF0b3JzIiwiY29uc29sZSIsIm1lc3NhZ2VzIiwiT2JqZWN0IiwidmFsdWVzIiwiZXJyb3JzIiwibWFwIiwiZXJyIiwiREVMRVRFIiwiZmluZEJ5SWRBbmREZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/orders/[id]/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.js":
/*!****************************!*\
  !*** ./src/lib/mongodb.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_Counter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/Counter.js */ \"(rsc)/./src/models/Counter.js\");\n/* harmony import */ var _models_Brand_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/Brand.js */ \"(rsc)/./src/models/Brand.js\");\n/* harmony import */ var _models_Category_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/Category.js */ \"(rsc)/./src/models/Category.js\");\n/* harmony import */ var _models_Product_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/Product.js */ \"(rsc)/./src/models/Product.js\");\n\n\n\n\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable');\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnQztBQUNGO0FBQ0Y7QUFDRztBQUNEO0FBRTlCLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUUzQyxJQUFJLENBQUNBLGFBQWE7SUFDaEIsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBRUEsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7UUFDbEI7UUFFQU4sT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVMsTUFBTUcsSUFBSSxDQUFDLENBQUNiO1lBQ3pELE9BQU9BO1FBQ1Q7SUFDRjtJQUVBLElBQUk7UUFDRkssT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDcEMsRUFBRSxPQUFPTSxHQUFHO1FBQ1ZULE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNTTtJQUNSO0lBRUEsT0FBT1QsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHBjXFxEb3dubG9hZHNcXGdpdGh1YlxccGhvbmUtc3RvcmVcXHNyY1xcbGliXFxtb25nb2RiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmltcG9ydCAnLi4vbW9kZWxzL0NvdW50ZXIuanMnO1xyXG5pbXBvcnQgJy4uL21vZGVscy9CcmFuZC5qcyc7XHJcbmltcG9ydCAnLi4vbW9kZWxzL0NhdGVnb3J5LmpzJztcclxuaW1wb3J0ICcuLi9tb2RlbHMvUHJvZHVjdC5qcyc7XHJcblxyXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xyXG5cclxuaWYgKCFNT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxufVxyXG5cclxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZTtcclxuXHJcbmlmICghY2FjaGVkKSB7XHJcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbm5lY3REQigpIHtcclxuICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgIHJldHVybiBjYWNoZWQuY29ubjtcclxuICB9XHJcblxyXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcclxuICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gbW9uZ29vc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcclxuICAgIHRocm93IGU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3REQjsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERCIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwiY29ubmVjdCIsInRoZW4iLCJlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Brand.js":
/*!*****************************!*\
  !*** ./src/models/Brand.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst BrandSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: [\n            true,\n            'Please provide a brand name'\n        ],\n        unique: true,\n        trim: true\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Brand || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Brand', BrandSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0JyYW5kLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUFjLElBQUlELHdEQUFlLENBQUM7SUFDdENHLE1BQU07UUFDSkMsTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBOEI7UUFDL0NDLFFBQVE7UUFDUkMsTUFBTTtJQUNSO0FBQ0YsR0FBRztJQUNEQyxZQUFZO0FBQ2Q7QUFFQSxpRUFBZVQsd0RBQWUsQ0FBQ1csS0FBSyxJQUFJWCxxREFBYyxDQUFDLFNBQVNDLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERvd25sb2Fkc1xcZ2l0aHViXFxwaG9uZS1zdG9yZVxcc3JjXFxtb2RlbHNcXEJyYW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCBCcmFuZFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIG5hbWU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBwcm92aWRlIGEgYnJhbmQgbmFtZSddLFxyXG4gICAgdW5pcXVlOiB0cnVlLFxyXG4gICAgdHJpbTogdHJ1ZVxyXG4gIH1cclxufSwge1xyXG4gIHRpbWVzdGFtcHM6IHRydWVcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQnJhbmQgfHwgbW9uZ29vc2UubW9kZWwoJ0JyYW5kJywgQnJhbmRTY2hlbWEpOyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIkJyYW5kU2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInRyaW0iLCJ0aW1lc3RhbXBzIiwibW9kZWxzIiwiQnJhbmQiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Brand.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Category.js":
/*!********************************!*\
  !*** ./src/models/Category.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CategorySchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: [\n            true,\n            'Please provide a category name'\n        ],\n        unique: true,\n        trim: true\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Category || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Category', CategorySchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0NhdGVnb3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxpQkFBaUIsSUFBSUQsd0RBQWUsQ0FBQztJQUN6Q0csTUFBTTtRQUNKQyxNQUFNQztRQUNOQyxVQUFVO1lBQUM7WUFBTTtTQUFpQztRQUNsREMsUUFBUTtRQUNSQyxNQUFNO0lBQ1I7QUFDRixHQUFHO0lBQ0RDLFlBQVk7QUFDZDtBQUVBLGlFQUFlVCx3REFBZSxDQUFDVyxRQUFRLElBQUlYLHFEQUFjLENBQUMsWUFBWUMsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRG93bmxvYWRzXFxnaXRodWJcXHBob25lLXN0b3JlXFxzcmNcXG1vZGVsc1xcQ2F0ZWdvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IENhdGVnb3J5U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgbmFtZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIHByb3ZpZGUgYSBjYXRlZ29yeSBuYW1lJ10sXHJcbiAgICB1bmlxdWU6IHRydWUsXHJcbiAgICB0cmltOiB0cnVlXHJcbiAgfVxyXG59LCB7XHJcbiAgdGltZXN0YW1wczogdHJ1ZVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5DYXRlZ29yeSB8fCBtb25nb29zZS5tb2RlbCgnQ2F0ZWdvcnknLCBDYXRlZ29yeVNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQ2F0ZWdvcnlTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwidHJpbSIsInRpbWVzdGFtcHMiLCJtb2RlbHMiLCJDYXRlZ29yeSIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Category.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Counter.js":
/*!*******************************!*\
  !*** ./src/models/Counter.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CounterSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    model: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    seq: {\n        type: Number,\n        default: 0\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Counter || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Counter\", CounterSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0NvdW50ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGdCQUFnQixJQUFJRCx3REFBZSxDQUFDO0lBQ3RDRyxPQUFPO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ3BEQyxLQUFLO1FBQUVKLE1BQU1LO1FBQVFDLFNBQVM7SUFBRTtBQUNwQztBQUVBLGlFQUFlVix3REFBZSxDQUFDWSxPQUFPLElBQUlaLHFEQUFjLENBQUMsV0FBV0MsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRG93bmxvYWRzXFxnaXRodWJcXHBob25lLXN0b3JlXFxzcmNcXG1vZGVsc1xcQ291bnRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5jb25zdCBDb3VudGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICBtb2RlbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcclxuICAgIHNlcTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQ291bnRlciB8fCBtb25nb29zZS5tb2RlbChcIkNvdW50ZXJcIiwgQ291bnRlclNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIkNvdW50ZXJTY2hlbWEiLCJTY2hlbWEiLCJtb2RlbCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsInNlcSIsIk51bWJlciIsImRlZmF1bHQiLCJtb2RlbHMiLCJDb3VudGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Counter.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Customer.js":
/*!********************************!*\
  !*** ./src/models/Customer.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Counter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Counter.js */ \"(rsc)/./src/models/Counter.js\");\n\n\nconst CustomerSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    _id: {\n        type: Number\n    },\n    name: {\n        type: String,\n        required: [\n            true,\n            'Please provide customer name'\n        ],\n        trim: true\n    },\n    phone: {\n        type: String,\n        required: [\n            true,\n            'Please provide phone number'\n        ],\n        trim: true\n    },\n    birthdayDate: {\n        type: Date,\n        default: null\n    }\n}, {\n    timestamps: true\n});\n//  Auto-increment ID before saving\nCustomerSchema.pre(\"save\", async function(next) {\n    if (this.isNew) {\n        const counter = await _Counter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOneAndUpdate({\n            model: \"Customer\"\n        }, {\n            $inc: {\n                seq: 1\n            }\n        }, {\n            new: true,\n            upsert: true\n        });\n        this._id = counter.seq;\n    }\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Customer || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Customer', CustomerSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0N1c3RvbWVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFDRztBQUVuQyxNQUFNRSxpQkFBaUIsSUFBSUYsd0RBQWUsQ0FBQztJQUN6Q0ksS0FBSztRQUFFQyxNQUFNQztJQUFPO0lBQ3BCQyxNQUFNO1FBQ0pGLE1BQU1HO1FBQ05DLFVBQVU7WUFBQztZQUFNO1NBQStCO1FBQ2hEQyxNQUFNO0lBQ1I7SUFDQUMsT0FBTztRQUNMTixNQUFNRztRQUNOQyxVQUFVO1lBQUM7WUFBTTtTQUE4QjtRQUMvQ0MsTUFBTTtJQUNSO0lBQ0FFLGNBQWM7UUFDWlAsTUFBTVE7UUFDTkMsU0FBUztJQUNYO0FBQ0YsR0FBRztJQUNEQyxZQUFZO0FBQ2Q7QUFFQSxxQ0FBcUM7QUFDckNiLGVBQWVjLEdBQUcsQ0FBQyxRQUFRLGVBQWdCQyxJQUFJO0lBQzdDLElBQUksSUFBSSxDQUFDQyxLQUFLLEVBQUU7UUFDZCxNQUFNQyxVQUFVLE1BQU1sQixtREFBT0EsQ0FBQ21CLGdCQUFnQixDQUM1QztZQUFFQyxPQUFPO1FBQVcsR0FDcEI7WUFBRUMsTUFBTTtnQkFBRUMsS0FBSztZQUFFO1FBQUUsR0FDbkI7WUFBRUMsS0FBSztZQUFNQyxRQUFRO1FBQUs7UUFFNUIsSUFBSSxDQUFDckIsR0FBRyxHQUFHZSxRQUFRSSxHQUFHO0lBQ3hCO0lBQ0FOO0FBQ0Y7QUFFQSxpRUFBZWpCLHdEQUFlLENBQUMyQixRQUFRLElBQUkzQixxREFBYyxDQUFDLFlBQVlFLGVBQWVBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERvd25sb2Fkc1xcZ2l0aHViXFxwaG9uZS1zdG9yZVxcc3JjXFxtb2RlbHNcXEN1c3RvbWVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmltcG9ydCBDb3VudGVyIGZyb20gXCIuL0NvdW50ZXIuanNcIjtcclxuXHJcbmNvbnN0IEN1c3RvbWVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgX2lkOiB7IHR5cGU6IE51bWJlciB9LCAvLyBBdXRvLWluY3JlbWVudGVkIG51bWVyaWMgSURcclxuICBuYW1lOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgcHJvdmlkZSBjdXN0b21lciBuYW1lJ10sXHJcbiAgICB0cmltOiB0cnVlXHJcbiAgfSxcclxuICBwaG9uZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIHByb3ZpZGUgcGhvbmUgbnVtYmVyJ10sXHJcbiAgICB0cmltOiB0cnVlXHJcbiAgfSxcclxuICBiaXJ0aGRheURhdGU6IHtcclxuICAgIHR5cGU6IERhdGUsXHJcbiAgICBkZWZhdWx0OiBudWxsXHJcbiAgfVxyXG59LCB7XHJcbiAgdGltZXN0YW1wczogdHJ1ZVxyXG59KTtcclxuXHJcbi8vIPCflKIgQXV0by1pbmNyZW1lbnQgSUQgYmVmb3JlIHNhdmluZ1xyXG5DdXN0b21lclNjaGVtYS5wcmUoXCJzYXZlXCIsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKHRoaXMuaXNOZXcpIHtcclxuICAgIGNvbnN0IGNvdW50ZXIgPSBhd2FpdCBDb3VudGVyLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgbW9kZWw6IFwiQ3VzdG9tZXJcIiB9LFxyXG4gICAgICB7ICRpbmM6IHsgc2VxOiAxIH0gfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHVwc2VydDogdHJ1ZSB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5faWQgPSBjb3VudGVyLnNlcTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5DdXN0b21lciB8fCBtb25nb29zZS5tb2RlbCgnQ3VzdG9tZXInLCBDdXN0b21lclNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQ291bnRlciIsIkN1c3RvbWVyU2NoZW1hIiwiU2NoZW1hIiwiX2lkIiwidHlwZSIsIk51bWJlciIsIm5hbWUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInRyaW0iLCJwaG9uZSIsImJpcnRoZGF5RGF0ZSIsIkRhdGUiLCJkZWZhdWx0IiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNvdW50ZXIiLCJmaW5kT25lQW5kVXBkYXRlIiwibW9kZWwiLCIkaW5jIiwic2VxIiwibmV3IiwidXBzZXJ0IiwibW9kZWxzIiwiQ3VzdG9tZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Customer.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Order.js":
/*!*****************************!*\
  !*** ./src/models/Order.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Counter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Counter.js */ \"(rsc)/./src/models/Counter.js\");\n\n\nconst OrderSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    _id: {\n        type: Number\n    },\n    customer: {\n        type: Number,\n        ref: 'Customer',\n        required: [\n            true,\n            'Please provide customer'\n        ]\n    },\n    discount: {\n        amount: {\n            type: Number,\n            default: 0\n        },\n        value: {\n            type: Number,\n            default: 0\n        },\n        type: {\n            type: String,\n            enum: [\n                'percentage',\n                'fixed'\n            ],\n            default: 'percentage'\n        }\n    },\n    items: [\n        {\n            product: {\n                type: Number,\n                ref: 'Product',\n                required: true\n            },\n            quantity: {\n                type: Number,\n                required: true,\n                min: 1\n            },\n            price: {\n                type: Number,\n                required: true\n            }\n        }\n    ],\n    total: {\n        type: Number,\n        required: [\n            true,\n            'Please provide total'\n        ],\n        min: 0\n    },\n    shipping: {\n        type: Number,\n        default: 0,\n        min: 0\n    },\n    subtotal: {\n        type: Number,\n        required: [\n            true,\n            'Please provide subtotal'\n        ],\n        min: 0\n    },\n    status: {\n        type: String,\n        enum: [\n            'pending',\n            'completed',\n            'cancelled'\n        ],\n        default: 'pending'\n    }\n}, {\n    timestamps: true\n});\n//  Auto-increment ID before saving\nOrderSchema.pre(\"save\", async function(next) {\n    if (this.isNew) {\n        const counter = await _Counter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOneAndUpdate({\n            model: \"Order\"\n        }, {\n            $inc: {\n                seq: 1\n            }\n        }, {\n            new: true,\n            upsert: true\n        });\n        this._id = counter.seq;\n    }\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Order || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Order', OrderSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL09yZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFDRztBQUVuQyxNQUFNRSxjQUFjLElBQUlGLHdEQUFlLENBQUM7SUFDdENJLEtBQUs7UUFBRUMsTUFBTUM7SUFBTztJQUNwQkMsVUFBVTtRQUNSRixNQUFNQztRQUNORSxLQUFLO1FBQ0xDLFVBQVU7WUFBQztZQUFNO1NBQTBCO0lBQzdDO0lBQ0FDLFVBQVU7UUFDUkMsUUFBUTtZQUNOTixNQUFNQztZQUNOTSxTQUFTO1FBQ1g7UUFDQUMsT0FBTztZQUNMUixNQUFNQztZQUNOTSxTQUFTO1FBQ1g7UUFDQVAsTUFBTTtZQUNKQSxNQUFNUztZQUNOQyxNQUFNO2dCQUFDO2dCQUFjO2FBQVE7WUFDN0JILFNBQVM7UUFDWDtJQUNGO0lBQ0FJLE9BQU87UUFBQztZQUNOQyxTQUFTO2dCQUNQWixNQUFNQztnQkFDTkUsS0FBSztnQkFDTEMsVUFBVTtZQUNaO1lBQ0FTLFVBQVU7Z0JBQ1JiLE1BQU1DO2dCQUNORyxVQUFVO2dCQUNWVSxLQUFLO1lBQ1A7WUFDQUMsT0FBTztnQkFDTGYsTUFBTUM7Z0JBQ05HLFVBQVU7WUFDWjtRQUNGO0tBQUU7SUFDRlksT0FBTztRQUNMaEIsTUFBTUM7UUFDTkcsVUFBVTtZQUFDO1lBQU07U0FBdUI7UUFDeENVLEtBQUs7SUFDUDtJQUNBRyxVQUFVO1FBQ1JqQixNQUFNQztRQUNOTSxTQUFTO1FBQ1RPLEtBQUs7SUFDUDtJQUNBSSxVQUFVO1FBQ1JsQixNQUFNQztRQUNORyxVQUFVO1lBQUM7WUFBTTtTQUEwQjtRQUMzQ1UsS0FBSztJQUNQO0lBQ0FLLFFBQVE7UUFDTm5CLE1BQU1TO1FBQ05DLE1BQU07WUFBQztZQUFXO1lBQWE7U0FBWTtRQUMzQ0gsU0FBUztJQUNYO0FBQ0YsR0FBRztJQUNEYSxZQUFZO0FBQ2Q7QUFDQSxxQ0FBcUM7QUFDckN2QixZQUFZd0IsR0FBRyxDQUFDLFFBQVEsZUFBZ0JDLElBQUk7SUFDMUMsSUFBSSxJQUFJLENBQUNDLEtBQUssRUFBRTtRQUNkLE1BQU1DLFVBQVUsTUFBTTVCLG1EQUFPQSxDQUFDNkIsZ0JBQWdCLENBQzVDO1lBQUVDLE9BQU87UUFBUSxHQUNqQjtZQUFFQyxNQUFNO2dCQUFFQyxLQUFLO1lBQUU7UUFBRSxHQUNuQjtZQUFFQyxLQUFLO1lBQU1DLFFBQVE7UUFBSztRQUU1QixJQUFJLENBQUMvQixHQUFHLEdBQUd5QixRQUFRSSxHQUFHO0lBQ3hCO0lBQ0FOO0FBQ0Y7QUFFQSxpRUFBZTNCLHdEQUFlLENBQUNxQyxLQUFLLElBQUlyQyxxREFBYyxDQUFDLFNBQVNFLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERvd25sb2Fkc1xcZ2l0aHViXFxwaG9uZS1zdG9yZVxcc3JjXFxtb2RlbHNcXE9yZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmltcG9ydCBDb3VudGVyIGZyb20gXCIuL0NvdW50ZXIuanNcIjtcclxuXHJcbmNvbnN0IE9yZGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgX2lkOiB7IHR5cGU6IE51bWJlciB9LCAvLyBBdXRvLWluY3JlbWVudGVkIG51bWVyaWMgSURcclxuICBjdXN0b21lcjoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgcmVmOiAnQ3VzdG9tZXInLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIHByb3ZpZGUgY3VzdG9tZXInXVxyXG4gIH0sXHJcbiAgZGlzY291bnQ6IHtcclxuICAgIGFtb3VudDoge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIGRlZmF1bHQ6IDBcclxuICAgIH0sXHJcbiAgICB2YWx1ZToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIGRlZmF1bHQ6IDBcclxuICAgIH0sXHJcbiAgICB0eXBlOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgZW51bTogWydwZXJjZW50YWdlJywgJ2ZpeGVkJ10sXHJcbiAgICAgIGRlZmF1bHQ6ICdwZXJjZW50YWdlJ1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaXRlbXM6IFt7XHJcbiAgICBwcm9kdWN0OiB7XHJcbiAgICAgIHR5cGU6IE51bWJlcixcclxuICAgICAgcmVmOiAnUHJvZHVjdCcsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgcXVhbnRpdHk6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgbWluOiAxXHJcbiAgICB9LFxyXG4gICAgcHJpY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfVxyXG4gIH1dLFxyXG4gIHRvdGFsOiB7XHJcbiAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgcHJvdmlkZSB0b3RhbCddLFxyXG4gICAgbWluOiAwXHJcbiAgfSxcclxuICBzaGlwcGluZzoge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgZGVmYXVsdDogMCxcclxuICAgIG1pbjogMFxyXG4gIH0sXHJcbiAgc3VidG90YWw6IHtcclxuICAgIHR5cGU6IE51bWJlcixcclxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSBwcm92aWRlIHN1YnRvdGFsJ10sXHJcbiAgICBtaW46IDBcclxuICB9LFxyXG4gIHN0YXR1czoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZW51bTogWydwZW5kaW5nJywgJ2NvbXBsZXRlZCcsICdjYW5jZWxsZWQnXSxcclxuICAgIGRlZmF1bHQ6ICdwZW5kaW5nJ1xyXG4gIH1cclxufSwge1xyXG4gIHRpbWVzdGFtcHM6IHRydWVcclxufSk7XHJcbi8vIPCflKIgQXV0by1pbmNyZW1lbnQgSUQgYmVmb3JlIHNhdmluZ1xyXG5PcmRlclNjaGVtYS5wcmUoXCJzYXZlXCIsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKHRoaXMuaXNOZXcpIHtcclxuICAgIGNvbnN0IGNvdW50ZXIgPSBhd2FpdCBDb3VudGVyLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgbW9kZWw6IFwiT3JkZXJcIiB9LFxyXG4gICAgICB7ICRpbmM6IHsgc2VxOiAxIH0gfSxcclxuICAgICAgeyBuZXc6IHRydWUsIHVwc2VydDogdHJ1ZSB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5faWQgPSBjb3VudGVyLnNlcTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5PcmRlciB8fCBtb25nb29zZS5tb2RlbCgnT3JkZXInLCBPcmRlclNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQ291bnRlciIsIk9yZGVyU2NoZW1hIiwiU2NoZW1hIiwiX2lkIiwidHlwZSIsIk51bWJlciIsImN1c3RvbWVyIiwicmVmIiwicmVxdWlyZWQiLCJkaXNjb3VudCIsImFtb3VudCIsImRlZmF1bHQiLCJ2YWx1ZSIsIlN0cmluZyIsImVudW0iLCJpdGVtcyIsInByb2R1Y3QiLCJxdWFudGl0eSIsIm1pbiIsInByaWNlIiwidG90YWwiLCJzaGlwcGluZyIsInN1YnRvdGFsIiwic3RhdHVzIiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNvdW50ZXIiLCJmaW5kT25lQW5kVXBkYXRlIiwibW9kZWwiLCIkaW5jIiwic2VxIiwibmV3IiwidXBzZXJ0IiwibW9kZWxzIiwiT3JkZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Order.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Product.js":
/*!*******************************!*\
  !*** ./src/models/Product.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Counter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Counter.js */ \"(rsc)/./src/models/Counter.js\");\n\n\nconst ProductSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    _id: {\n        type: Number\n    },\n    name: {\n        type: String,\n        required: [\n            true,\n            \"Please provide product name\"\n        ],\n        trim: true\n    },\n    color: {\n        type: String,\n        required: [\n            true,\n            \"Please provide color\"\n        ],\n        trim: true\n    },\n    regularPrice: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide regular price\"\n        ],\n        min: 0\n    },\n    salePrice: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide sale price\"\n        ],\n        min: 0\n    },\n    wholesalePrice: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide wholesale price\"\n        ],\n        min: 0\n    },\n    brand: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"Brand\",\n        required: [\n            true,\n            \"Please provide brand\"\n        ]\n    },\n    category: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"Category\",\n        required: [\n            true,\n            \"Please provide category\"\n        ]\n    },\n    stock: {\n        type: Number,\n        required: [\n            true,\n            \"Please provide stock quantity\"\n        ],\n        min: 0,\n        default: 0\n    }\n}, {\n    timestamps: true,\n    _id: false\n} // important: disable default ObjectId\n);\n//  Auto-increment ID before saving\nProductSchema.pre(\"save\", async function(next) {\n    if (this.isNew) {\n        const counter = await _Counter_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOneAndUpdate({\n            model: \"Product\"\n        }, {\n            $inc: {\n                seq: 1\n            }\n        }, {\n            new: true,\n            upsert: true\n        });\n        this._id = counter.seq;\n    }\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Product || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Product\", ProductSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1Byb2R1Y3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNHO0FBRW5DLE1BQU1FLGdCQUFnQixJQUFJRix3REFBZSxDQUN2QztJQUNFSSxLQUFLO1FBQUVDLE1BQU1DO0lBQU87SUFDcEJDLE1BQU07UUFDSkYsTUFBTUc7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBOEI7UUFDL0NDLE1BQU07SUFDUjtJQUNBQyxPQUFPO1FBQ0xOLE1BQU1HO1FBQ05DLFVBQVU7WUFBQztZQUFNO1NBQXVCO1FBQ3hDQyxNQUFNO0lBQ1I7SUFDQUUsY0FBYztRQUNaUCxNQUFNQztRQUNORyxVQUFVO1lBQUM7WUFBTTtTQUErQjtRQUNoREksS0FBSztJQUNQO0lBQ0FDLFdBQVc7UUFDVFQsTUFBTUM7UUFDTkcsVUFBVTtZQUFDO1lBQU07U0FBNEI7UUFDN0NJLEtBQUs7SUFDUDtJQUNBRSxnQkFBZ0I7UUFDZFYsTUFBTUM7UUFDTkcsVUFBVTtZQUFDO1lBQU07U0FBaUM7UUFDbERJLEtBQUs7SUFDUDtJQUNBRyxPQUFPO1FBQ0xYLE1BQU1MLHdEQUFlLENBQUNpQixLQUFLLENBQUNDLFFBQVE7UUFDcENDLEtBQUs7UUFDTFYsVUFBVTtZQUFDO1lBQU07U0FBdUI7SUFDMUM7SUFDQVcsVUFBVTtRQUNSZixNQUFNTCx3REFBZSxDQUFDaUIsS0FBSyxDQUFDQyxRQUFRO1FBQ3BDQyxLQUFLO1FBQ0xWLFVBQVU7WUFBQztZQUFNO1NBQTBCO0lBQzdDO0lBQ0FZLE9BQU87UUFDTGhCLE1BQU1DO1FBQ05HLFVBQVU7WUFBQztZQUFNO1NBQWdDO1FBQ2pESSxLQUFLO1FBQ0xTLFNBQVM7SUFDWDtBQUNGLEdBQ0E7SUFBRUMsWUFBWTtJQUFNbkIsS0FBSztBQUFNLEVBQUUsc0NBQXNDOztBQUd6RSxxQ0FBcUM7QUFDckNGLGNBQWNzQixHQUFHLENBQUMsUUFBUSxlQUFnQkMsSUFBSTtJQUM1QyxJQUFJLElBQUksQ0FBQ0MsS0FBSyxFQUFFO1FBQ2QsTUFBTUMsVUFBVSxNQUFNMUIsbURBQU9BLENBQUMyQixnQkFBZ0IsQ0FDNUM7WUFBRUMsT0FBTztRQUFVLEdBQ25CO1lBQUVDLE1BQU07Z0JBQUVDLEtBQUs7WUFBRTtRQUFFLEdBQ25CO1lBQUVDLEtBQUs7WUFBTUMsUUFBUTtRQUFLO1FBRTVCLElBQUksQ0FBQzdCLEdBQUcsR0FBR3VCLFFBQVFJLEdBQUc7SUFDeEI7SUFDQU47QUFDRjtBQUVBLGlFQUFlekIsd0RBQWUsQ0FBQ21DLE9BQU8sSUFBSW5DLHFEQUFjLENBQUMsV0FBV0UsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwY1xcRG93bmxvYWRzXFxnaXRodWJcXHBob25lLXN0b3JlXFxzcmNcXG1vZGVsc1xcUHJvZHVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcbmltcG9ydCBDb3VudGVyIGZyb20gXCIuL0NvdW50ZXIuanNcIjtcclxuXHJcbmNvbnN0IFByb2R1Y3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIF9pZDogeyB0eXBlOiBOdW1iZXIgfSwgLy8gQXV0by1pbmNyZW1lbnRlZCBudW1lcmljIElEXHJcbiAgICBuYW1lOiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCBcIlBsZWFzZSBwcm92aWRlIHByb2R1Y3QgbmFtZVwiXSxcclxuICAgICAgdHJpbTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBjb2xvcjoge1xyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBjb2xvclwiXSxcclxuICAgICAgdHJpbTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICByZWd1bGFyUHJpY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogW3RydWUsIFwiUGxlYXNlIHByb3ZpZGUgcmVndWxhciBwcmljZVwiXSxcclxuICAgICAgbWluOiAwLFxyXG4gICAgfSxcclxuICAgIHNhbGVQcmljZToge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBzYWxlIHByaWNlXCJdLFxyXG4gICAgICBtaW46IDAsXHJcbiAgICB9LFxyXG4gICAgd2hvbGVzYWxlUHJpY2U6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICByZXF1aXJlZDogW3RydWUsIFwiUGxlYXNlIHByb3ZpZGUgd2hvbGVzYWxlIHByaWNlXCJdLFxyXG4gICAgICBtaW46IDAsXHJcbiAgICB9LFxyXG4gICAgYnJhbmQ6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6IFwiQnJhbmRcIixcclxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCBcIlBsZWFzZSBwcm92aWRlIGJyYW5kXCJdLFxyXG4gICAgfSxcclxuICAgIGNhdGVnb3J5OiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiBcIkNhdGVnb3J5XCIsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBjYXRlZ29yeVwiXSxcclxuICAgIH0sXHJcbiAgICBzdG9jazoge1xyXG4gICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgXCJQbGVhc2UgcHJvdmlkZSBzdG9jayBxdWFudGl0eVwiXSxcclxuICAgICAgbWluOiAwLFxyXG4gICAgICBkZWZhdWx0OiAwLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHsgdGltZXN0YW1wczogdHJ1ZSwgX2lkOiBmYWxzZSB9IC8vIGltcG9ydGFudDogZGlzYWJsZSBkZWZhdWx0IE9iamVjdElkXHJcbik7XHJcblxyXG4vLyDwn5SiIEF1dG8taW5jcmVtZW50IElEIGJlZm9yZSBzYXZpbmdcclxuUHJvZHVjdFNjaGVtYS5wcmUoXCJzYXZlXCIsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgaWYgKHRoaXMuaXNOZXcpIHtcclxuICAgIGNvbnN0IGNvdW50ZXIgPSBhd2FpdCBDb3VudGVyLmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgIHsgbW9kZWw6IFwiUHJvZHVjdFwiIH0sXHJcbiAgICAgIHsgJGluYzogeyBzZXE6IDEgfSB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSwgdXBzZXJ0OiB0cnVlIH1cclxuICAgICk7XHJcbiAgICB0aGlzLl9pZCA9IGNvdW50ZXIuc2VxO1xyXG4gIH1cclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLlByb2R1Y3QgfHwgbW9uZ29vc2UubW9kZWwoXCJQcm9kdWN0XCIsIFByb2R1Y3RTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJDb3VudGVyIiwiUHJvZHVjdFNjaGVtYSIsIlNjaGVtYSIsIl9pZCIsInR5cGUiLCJOdW1iZXIiLCJuYW1lIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ0cmltIiwiY29sb3IiLCJyZWd1bGFyUHJpY2UiLCJtaW4iLCJzYWxlUHJpY2UiLCJ3aG9sZXNhbGVQcmljZSIsImJyYW5kIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImNhdGVnb3J5Iiwic3RvY2siLCJkZWZhdWx0IiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNvdW50ZXIiLCJmaW5kT25lQW5kVXBkYXRlIiwibW9kZWwiLCIkaW5jIiwic2VxIiwibmV3IiwidXBzZXJ0IiwibW9kZWxzIiwiUHJvZHVjdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Product.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cgithub%5Cphone-store&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();